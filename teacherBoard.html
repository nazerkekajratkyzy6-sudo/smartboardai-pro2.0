<!DOCTYPE html>
<html lang="kk">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartBoardAI PRO ‚Äî –ú“±“ì–∞–ª—ñ–º —Ç–∞“õ—Ç–∞—Å—ã</title>

  <link rel="stylesheet" href="./styles/main.css" />

  <!-- MathJax –§–æ—Ä–º—É–ª–∞ -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- i18n -->
  <script type="module" src="./i18n.js"></script>

  <style>
    /* üåê Language switch */
    .lang-switch {
      background: white;
      border-radius: 10px;
      padding: 8px 14px;
      display: flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.12);
      cursor: pointer;
      font-weight: 600;
      user-select: none;
    }

    .lang-dropdown {
      position: absolute;
      right: 0;
      top: 52px;
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.12);
      display: none;
      z-index: 200;
    }

    .lang-dropdown button {
      padding: 10px 16px;
      border: none;
      background: white;
      cursor: pointer;
      width: 140px;
      text-align: left;
      font-weight: 600;
    }

    .lang-dropdown button:hover {
      background: #f3f4f6;
    }

    /* üîê PIN modal */
    .pin-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.35);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 5000;
    }

    .pin-modal {
      background: white;
      padding: 30px;
      border-radius: 16px;
      width: 320px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      text-align: center;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    .pin-modal input {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      margin-top: 12px;
      font-size: 22px;
      text-align: center;
      letter-spacing: 8px;
    }

    .pin-modal button {
      margin-top: 14px;
      width: 100%;
      border-radius: 10px;
      padding: 12px;
      background: #4a6cf7;
      color: white;
      font-size: 16px;
      font-weight: 600;
      border: none;
      cursor: pointer;
    }

    /* üìÑ MULTI-PAGE SIDEBAR */
    .pages-panel {
      margin-bottom: 20px;
      padding: 10px;
      border-radius: 14px;
      background: #f3f4f6;
    }

    .pages-panel h3 {
      font-size: 16px;
      margin-bottom: 10px;
    }

    .pages-list {
      display: flex;
      flex-direction: column;
      gap: 6px;
      max-height: 220px;
      overflow-y: auto;
    }

    .page-item {
      padding: 8px 12px;
      background: white;
      border-radius: 10px;
      cursor: pointer;
      border: 1px solid #e5e7eb;
      font-size: 14px;
      transition: background 0.15s, color 0.15s, border-color 0.15s;
    }

    .page-item.active {
      background: #2563eb;
      color: white;
      border-color: #1d4ed8;
    }

    .add-page-btn {
      width: 100%;
      margin-top: 10px;
      padding: 8px 12px;
      border: none;
      border-radius: 10px;
      background: #10b981;
      color: white;
      font-weight: 600;
      cursor: pointer;
    }
  </style>
</head>

<body>

  <!-- üîê PIN modal (—Ç–µ–∫ “õ–∞–∑–∞“õ—à–∞) -->
  <div class="pin-overlay" id="pinOverlay">
    <div class="pin-modal">
      <h3>“ö–∞—É—ñ–ø—Å—ñ–∑–¥—ñ–∫ PIN</h3>
      <p>–ú“±“ì–∞–ª—ñ–º —Ç–∞“õ—Ç–∞—Å—ã–Ω–∞ –∫—ñ—Ä—É “Ø—à—ñ–Ω PIN –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑.</p>
      <input id="pinInput" type="password" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
      <button id="pinSubmit">–ö—ñ—Ä—É</button>
      <p id="pinError" class="small" style="color:red;margin-top:8px;"></p>
    </div>
  </div>

  <header>
    <h2 data-i18n="teacher_header_title">SmartBoardAI PRO ‚Äî –ú“±“ì–∞–ª—ñ–º —Ç–∞“õ—Ç–∞—Å—ã</h2>

    <div style="display:flex; align-items:center; gap:16px; position:relative;">

      <button id="createRoomBtn" class="ai-btn-primary"
        data-i18n="teacher_create_room">
        –ñ–∞“£–∞ Room
      </button>

      <button id="qrBtn"
        style="background:#10b981;color:white;padding:10px 14px;border-radius:10px;">
        üî≥ QR
      </button>

      <span>
        <b>Room ID:</b>
        <span id="roomIdLabel">‚Äì</span>
      </span>

      <button id="fullscreenToggleBtn"
        style="background:#e5e7eb;color:#111;padding:10px 14px;border-radius:10px;">
        ‚õ∂ Fullscreen
      </button>

      <!-- üåê Language switch -->
      <div class="lang-switch" id="langBtn">
        üåê <span data-lang-current>KZ</span>
      </div>

      <div class="lang-dropdown" id="langDropdown">
        <button data-lang-option="kk">üá∞üáø “ö–∞–∑–∞“õ—à–∞</button>
        <button data-lang-option="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
        <button data-lang-option="en">üá¨üáß English</button>
      </div>

    </div>
  </header>

  <!-- AI –ø–∞–Ω–µ–ª—ñ -->
  <div class="ai-panel">
    <h3 data-i18n="ai_panel_title">AI —Ç–∞–ø—Å—ã—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã</h3>

    <textarea id="aiPrompt" class="ai-textarea"
      data-i18n="ai_panel_placeholder"
      placeholder="AI-“ì–∞ —Ç–∞–ø—Å—ã—Ä–º–∞ –∂–∞–∑—ã“£—ã–∑..."></textarea>

    <div class="ai-panel-actions">
      <button id="aiGenerateBtn" class="ai-btn-primary"
        data-i18n="ai_panel_generate">
        AI ‚Üí –ë–ª–æ–∫ “õ–æ—Å—É
      </button>
      <button id="lessonPlannerBtn" class="lp-btn-secondary"
        data-i18n="ai_panel_lesson_planner">
        üìò Lesson Planner
      </button>
    </div>
  </div>

  <div class="main-container">

    <!-- –°–æ–ª –∂–∞“õ –ø–∞–Ω–µ–ª—å -->
    <aside class="sidebar">

      <!-- üìÑ MULTI-PAGE PANEL -->
      <div class="pages-panel">
        <h3>–ë–µ—Ç—Ç–µ—Ä</h3>
        <div id="pagesList" class="pages-list"></div>
        <button id="addPageBtn" class="add-page-btn">‚ûï –ñ–∞“£–∞ –±–µ—Ç</button>
      </div>
      <hr>

      <h3 data-i18n="tools_title">“ö“±—Ä–∞–ª–¥–∞—Ä</h3>
      <button id="toolCard" data-i18n="tool_card">–ö–∞—Ä—Ç–æ—á–∫–∞</button>
      <button id="toolPhoto" data-i18n="tool_photo">–§–æ—Ç–æ</button>
      <button id="toolVideo" data-i18n="tool_video">–í–∏–¥–µ–æ</button>
      <button id="toolLink" data-i18n="tool_link">–°—ñ–ª—Ç–µ–º–µ</button>
      <button id="toolFormula" data-i18n="tool_formula">–§–æ—Ä–º—É–ª–∞</button>
      <button id="toolTrainer" data-i18n="tool_trainer">–¢—Ä–µ–Ω–∞–∂–µ—Ä</button>
      <button id="toolQuiz" data-i18n="tool_quiz">–í–∏–∫—Ç–æ—Ä–∏–Ω–∞</button>
    </aside>

    <!-- –¢–∞“õ—Ç–∞ -->
    <section id="boardArea" class="board-area"></section>

    <!-- –û“£ –∂–∞“õ –ø–∞–Ω–µ–ª—å -->
    <aside class="rightbar">
      <div class="rightbar-card">

        <div class="tabs">
          <button class="tab-btn active" data-tab="answers"
            data-i18n="tab_answers">–ñ–∞—É–∞–ø—Ç–∞—Ä</button>
          <button class="tab-btn" data-tab="students"
            data-i18n="tab_students">–û“õ—É—à—ã–ª–∞—Ä</button>
          <button class="tab-btn" data-tab="emoji"
            data-i18n="tab_emoji">–≠–º–æ—Ü–∏—è</button>
          <button class="tab-btn" data-tab="cloud"
            data-i18n="tab_cloud">Word Cloud</button>
        </div>

        <!-- ANSWERS -->
        <div id="tab-answers" class="tab-content active">
          <h3 data-i18n="answers_title">–û“õ—É—à—ã –∂–∞—É–∞–ø—Ç–∞—Ä—ã</h3>
          <div id="answersBox" class="answers-box">
            <div class="small" data-i18n="answers_empty">
              ”ò–∑—ñ—Ä—à–µ –∂–∞—É–∞–ø –∂–æ“õ...
            </div>
          </div>
        </div>

        <!-- STUDENTS -->
        <div id="tab-students" class="tab-content">
          <h3 data-i18n="students_title">–û“õ—É—à—ã–ª–∞—Ä</h3>
          <p>Room: <code id="roomIdLabel2">‚Äì</code></p>
          <div id="studentsList" class="students-list">
            <div class="small" data-i18n="students_empty">
              –ï—à–∫—ñ–º “õ–æ—Å—ã–ª–º–∞–¥—ã
            </div>
          </div>
        </div>

        <!-- EMOJI -->
        <div id="tab-emoji" class="tab-content">
          <h3 data-i18n="emoji_title_teacher">–≠–º–æ—Ü–∏—è–ª—ã“õ —Ä–µ—Ñ–ª–µ–∫—Å–∏—è</h3>
          <div class="emoji-row">
            <button class="emoji-btn" data-emoji="üôÇ">üôÇ</button>
            <button class="emoji-btn" data-emoji="üòê">üòê</button>
            <button class="emoji-btn" data-emoji="üòï">üòï</button>
            <button class="emoji-btn" data-emoji="üò¢">üò¢</button>
            <button class="emoji-btn" data-emoji="ü§©">ü§©</button>
          </div>
          <div id="emojiStats" class="small"
            data-i18n="emoji_stats_empty">
            ”ò–∑—ñ—Ä—à–µ —ç–º–æ—Ü–∏—è –∂–æ“õ...
          </div>
        </div>

        <!-- WORD CLOUD -->
        <div id="tab-cloud" class="tab-content">
          <h3 data-i18n="cloud_title">Word Cloud (—Å”©–∑ –±“±–ª—Ç—ã)</h3>
          <div id="wordCloud" class="word-cloud">
            <div class="small" data-i18n="cloud_empty">
              –ü—ñ–∫—ñ—Ä –∂–æ“õ...
            </div>
          </div>
        </div>

      </div>
    </aside>

  </div>

  <!-- Lesson Planner -->
  <div id="lpOverlay" class="lp-overlay lp-hidden"></div>

  <div id="lessonPlannerModal" class="lp-modal lp-hidden">
    <div class="lp-modal-inner">

      <div class="lp-header">
        <h3 data-i18n="lp_modal_title">üìò Lesson Planner</h3>
        <button id="lpCloseBtn" class="lp-close-btn">‚úï</button>
      </div>

      <div class="lp-body">

        <label>
          <span data-i18n="lp_subject_label">–ü”ô–Ω:</span>
          <input id="lpSubject" type="text"
            data-i18n="lp_subject_placeholder"
            placeholder="–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞, “ö–∞–∑–∞“õ —Ç—ñ–ª—ñ, –§–∏–∑–∏–∫–∞" />
        </label>

        <label>
          <span data-i18n="lp_grade_label">–°—ã–Ω—ã–ø:</span>
          <input id="lpGrade" type="text"
            data-i18n="lp_grade_placeholder"
            placeholder="7-—Å—ã–Ω—ã–ø" />
        </label>

        <label>
          <span data-i18n="lp_topic_label">–¢–∞“õ—ã—Ä—ã–ø:</span>
          <input id="lpTopic" type="text"
            data-i18n="lp_topic_placeholder"
            placeholder="–ú—ã—Å–∞–ª—ã: –ë”©–ª—à–µ–∫—Ç–µ—Ä–¥—ñ “õ–æ—Å—É" />
        </label>

        <label>
          <span data-i18n="lp_lang_label">–¢—ñ–ª:</span>
          <select id="lpLang">
            <option value="kk">“ö–∞–∑–∞“õ—à–∞</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="en">English</option>
          </select>
        </label>

        <label>
          <span data-i18n="lp_format_label">–§–æ—Ä–º–∞—Ç:</span>
          <select id="lpFormat">
            <option value="short">“ö—ã—Å“õ–∞ –∂–æ—Å–ø–∞—Ä</option>
            <option value="full">–¢–æ–ª—ã“õ –∂–æ—Å–ø–∞—Ä</option>
          </select>
        </label>

        <label>
          <span data-i18n="lp_extra_label">“ö–æ—Å—ã–º—à–∞ —Ç–∞–ª–∞–ø:</span>
          <textarea id="lpExtra"
            data-i18n="lp_extra_placeholder"
            placeholder="–î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è, –æ–π—ã–Ω, –ò–ò “õ–æ–ª–¥–∞–Ω—É..."></textarea>
        </label>

      </div>

      <div class="lp-footer">
        <button id="lpGenerateBtn" class="ai-btn-primary"
          data-i18n="lp_generate_button">
          ü§ñ –°–∞–±–∞“õ –∂–æ—Å–ø–∞—Ä—ã–Ω “õ“±—Ä—É
        </button>
        <button id="lpInsertToBoardBtn"
          class="lp-btn-secondary lp-hidden"
          data-i18n="lp_insert_button">
          ‚ûï –¢–∞“õ—Ç–∞“ì–∞ “õ–æ—Å—É
        </button>
      </div>

      <div class="lp-result lp-hidden">
        <h4 data-i18n="lp_result_title">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è–ª–∞–Ω“ì–∞–Ω –∂–æ—Å–ø–∞—Ä:</h4>
        <textarea id="lpResultText" readonly></textarea>
      </div>

    </div>
  </div>

  <!-- QR Modal -->
  <div id="qrOverlay" class="lp-overlay lp-hidden"></div>

  <div id="qrModal" class="lp-modal lp-hidden">
    <div class="lp-modal-inner">
      <div class="lp-header">
        <h3>üî≥ QR –∞—Ä“õ—ã–ª—ã “õ–æ—Å—ã–ª—É</h3>
        <button id="qrCloseBtn" class="lp-close-btn">‚úï</button>
      </div>
      <div class="lp-body" style="text-align:center;">
        <div id="qrImage"></div>
        <p class="small" style="margin-top:10px;">
          –û“õ—É—à—ã–ª–∞—Ä –æ—Å—ã QR –∞—Ä“õ—ã–ª—ã –±”©–ª–º–µ–≥–µ –∫—ñ—Ä–µ–¥—ñ.
        </p>
      </div>
    </div>
  </div>

  <!-- Lang dropdown JS -->
  <script>
    const tLangBtn = document.getElementById("langBtn");
    const tLangDD = document.getElementById("langDropdown");

    tLangBtn.addEventListener("click", () => {
      tLangDD.style.display = tLangDD.style.display === "block" ? "none" : "block";
    });

    document.addEventListener("click", (e) => {
      if (!tLangBtn.contains(e.target) && !tLangDD.contains(e.target)) {
        tLangDD.style.display = "none";
      }
    });
  </script>

  <!-- QRCode library (global QRCode) -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script type="module" src="./teacherBoard.js"></script>
</body>

</html>
