<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartBoardAI PRO ‚Äì –ú“±“ì–∞–ª—ñ–º</title>

  <!-- MAIN CSS -->
  <link rel="stylesheet" href="./styles/main.css" />

  <!-- MATHJAX -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- HTML2CANVAS & JSPDF -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- QR –∫–æ–¥ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

</head>

<body>

  <!-- ============================================================
       TOPBAR
  ============================================================= -->
  <div class="topbar">
    <div class="topbar-left">SmartBoardAI PRO 2.0</div>

    <div class="topbar-right">
      <input id="saveName" placeholder="–°–∞–±–∞“õ –∞—Ç–∞—É—ã" style="padding:6px;border-radius:8px;border:1px solid #ddd;" />

      <button id="saveLessonBtn" class="tool-btn">üíæ –°–∞“õ—Ç–∞—É</button>
      <button id="loadLessonBtn" class="tool-btn">üìÇ –ñ“Ø–∫—Ç–µ—É</button>
      <button id="exportPdfBtn" class="tool-btn">üìÑ PDF</button>
      <button id="exportPngBtn" class="tool-btn">üñº Image</button>
      <button id="shareLessonBtn" class="tool-btn">üîó Share</button>
      <button id="qrBtn" class="tool-btn">üßæ QR (student)</button>

      <select id="langSelect" class="lang-select">
        <option value="kk">KZ</option>
        <option value="ru">RU</option>
        <option value="en">EN</option>
      </select>

      <button id="fullscreenToggleBtn" class="tool-btn">‚õ∂ –¢–æ–ª—ã“õ —ç–∫—Ä–∞–Ω</button>
    </div>
  </div>

  <!-- ============================================================
       MAIN GRID
  ============================================================= -->
  <div class="main-container">

    <!-- ============================================================
         SIDEBAR ‚Äî TOOLS
    ============================================================= -->
    <aside class="sidebar">

      <h3 class="section-title toolsTitle">“ö“±—Ä–∞–ª–¥–∞—Ä</h3>

      <h4>–ö–æ–Ω—Ç–µ–Ω—Ç –±–ª–æ–∫—Ç–∞—Ä</h4>
      <button id="toolCard" class="tool-btn">üìÑ –ö–∞—Ä—Ç–æ—á–∫–∞</button>
      <button id="toolFormula" class="tool-btn">‚àë –§–æ—Ä–º—É–ª–∞</button>
      <button id="toolPhoto" class="tool-btn">üì∑ –§–æ—Ç–æ</button>
      <button id="toolVideo" class="tool-btn">üé¨ –í–∏–¥–µ–æ</button>
      <button id="toolLink" class="tool-btn">üîó –°—ñ–ª—Ç–µ–º–µ</button>

      <hr />

      <h4>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤</h4>
      <button id="toolTrainer" class="tool-btn">üí° –¢—Ä–µ–Ω–∞–∂–µ—Ä</button>
      <button id="toolQuiz" class="tool-btn">‚ùì –í–∏–∫—Ç–æ—Ä–∏–Ω–∞</button>

      <hr />

      <h3 class="section-title">AI –ø–∞–Ω–µ–ª—ñ</h3>

      <div>
        <button class="ai-mode-btn active" data-mode="lesson">–°–∞–±–∞“õ –∂–æ—Å–ø–∞—Ä—ã</button>
        <button class="ai-mode-btn" data-mode="content">–ö–æ–Ω—Ç–µ–Ω—Ç</button>
        <button class="ai-mode-btn" data-mode="creative">–ö—Ä–µ–∞—Ç–∏–≤</button>
      </div>

      <textarea id="aiPrompt" placeholder="–¢–∞–ø—Å—ã—Ä–º–∞“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑..." style="width:100%;margin-top:10px;"></textarea>

      <button id="aiRunBtn" class="tool-btn">‚ö° –ì–µ–Ω–µ—Ä–∞—Ü–∏—è–ª–∞—É</button>
      <div id="aiOutput" class="board-card" style="margin-top:10px;"><span class="small">AI –∂–∞—É–∞–±—ã –æ—Å—ã–Ω–¥–∞...</span></div>

      <button id="aiInsertBtn" class="tool-btn">‚ûï –¢–∞“õ—Ç–∞“ì–∞ –µ–Ω–≥—ñ–∑—É</button>
      <button id="aiCopyBtn" class="tool-btn">üìã –ö”©—à—ñ—Ä—É</button>
      <button id="aiClearBtn" class="tool-btn">üóë –¢–∞–∑–∞–ª–∞—É</button>

      <hr />

      <h3 class="section-title">–°–∞–±–∞“õ –∂–æ—Å–ø–∞—Ä—ã (LP)</h3>
      <button id="lessonPlannerBtn" class="tool-btn">üìò Lesson Planner</button>

      <hr />

      <h3 class="section-title">‚úèÔ∏è –°—É—Ä–µ—Ç —Å–∞–ª—É —Ç–∞“õ—Ç–∞—Å—ã</h3>

      <div class="drawing-panel">
        <div class="drawing-tools">
          <button id="drawPenBtn">“ö–∞–ª–∞–º</button>
          <button id="drawMarkerBtn">–ú–∞—Ä–∫–µ—Ä</button>
          <button id="drawEraserBtn">”®—à—ñ—Ä—É</button>

          <input id="drawColor" type="color" value="#111827" />
          <input id="drawSize" type="range" min="2" max="30" value="5" />
        </div>
        <canvas id="drawingCanvas"></canvas>
        <button id="drawClearBtn" class="tool-btn" style="margin-top:10px;">üßπ –¢–∞–∑–∞–ª–∞—É</button>
      </div>

    </aside>

    <!-- ============================================================
         BOARD AREA (CENTER)
    ============================================================= -->
    <main class="board-area-container">

      <!-- –¢–∞“õ—Ç–∞ –±–µ—Ç—Ç–µ—Ä—ñ -->
      <div id="tabsContainer" style="margin-bottom:10px;"></div>

      <!-- –¢–∞“õ—Ç–∞ -->
      <div id="boardExportRoot">
        <div id="boardArea"></div>
      </div>

    </main>

    <!-- ============================================================
         RIGHTBAR ‚Äî ROOM, ANSWERS, EMOJI, CLOUD
    ============================================================= -->
    <aside class="rightbar">

      <h3 class="section-title roomTitle">Room ID & –æ“õ—É—à—ã–ª–∞—Ä</h3>
      <p>Room: <b id="roomIdLabel">‚Äì</b></p>
      <button id="createRoomBtn" class="tool-btn">üü¢ –ñ–∞“£–∞ –±”©–ª–º–µ</button>

      <hr />

      <h3 class="section-title answersTitle">–û“õ—É—à—ã –∂–∞—É–∞–ø—Ç–∞—Ä—ã</h3>
      <div id="answersBox" class="answers-box"></div>

      <hr />

      <h3 class="section-title moodTitle">–≠–º–æ—Ü–∏—è–ª—ã“õ —Ä–µ—Ñ–ª–µ–∫—Å–∏—è</h3>
      <div id="emojiStats" class="small">–î–µ—Ä–µ–∫ –∂–æ“õ‚Ä¶</div>

      <hr />

      <h3 class="section-title cloudTitle">Word Cloud</h3>
      <div id="wordCloud" class="word-cloud"></div>
    </aside>

  </div>

  <!-- ============================================================
       MODALS (Lesson Planner / Trainer / QR / Share)
  ============================================================= -->

  <!-- Lesson Planner -->
  <div id="lpOverlay" class="lp-hidden lp-overlay"></div>
  <div id="lessonPlannerModal" class="lp-hidden lp-modal">
    <div class="modal-title">Lesson Planner (AI)</div>
    <textarea id="lpPrompt" class="modal-input" placeholder="–°—ã–Ω—ã–ø, —Ç–∞“õ—ã—Ä—ã–ø, –º–∞“õ—Å–∞—Ç—Ç–∞—Ä..."></textarea>
    <button id="lpGenerateBtn" class="modal-btn">‚ö° –°–∞–±–∞“õ –∂–æ—Å–ø–∞—Ä—ã–Ω “õ“±—Ä—É</button>
    <button id="lpCloseBtn" class="modal-btn" style="background:#aaa;">–ñ–∞–±—É</button>
  </div>

  <!-- Trainer -->
  <div id="trainerOverlay" class="lp-hidden lp-overlay"></div>
  <div id="trainerModal" class="lp-hidden lp-modal">
    <div class="modal-title">üí° –¢—Ä–µ–Ω–∞–∂–µ—Ä “õ–æ—Å—É</div>
    <input id="trainerTitleInput" class="modal-input" placeholder="–¢—Ä–µ–Ω–∞–∂–µ—Ä –∞—Ç–∞—É—ã" />
    <input id="trainerUrlInput" class="modal-input" placeholder="https://‚Ä¶ (iframe URL)" />
    <button id="trainerAddBtn" class="modal-btn">“ö–æ—Å—É</button>
    <button id="trainerCloseBtn" class="modal-btn" style="background:#aaa;">–ñ–∞–±—É</button>
  </div>

  <!-- QR Modal -->
  <div id="qrOverlay" class="lp-hidden lp-overlay"></div>
  <div id="qrModal" class="lp-hidden lp-modal">
    <div class="modal-title">üì± Student QR</div>
    <canvas id="qrCanvas"></canvas>
    <p style="font-size:14px;margin-top:10px;">–û“õ—É—à—ã–ª–∞—Ä –æ—Å—ã QR –∞—Ä“õ—ã–ª—ã student.html –±–µ—Ç—ñ–Ω–µ –∫—ñ—Ä–µ–¥—ñ.</p>
    <button id="qrCloseBtn" class="modal-btn" style="background:#aaa;">–ñ–∞–±—É</button>
  </div>

  <!-- Share Modal -->
  <div id="shareOverlay" class="lp-hidden lp-overlay"></div>
  <div id="shareModal" class="lp-hidden lp-modal">
    <div class="modal-title">üîó Share Lesson</div>
    <input id="shareLinkInput" class="modal-input" readonly />
    <button id="shareCopyBtn" class="modal-btn">–ö”©—à—ñ—Ä—É</button>
    <button id="shareCloseBtn" class="modal-btn" style="background:#aaa;">–ñ–∞–±—É</button>
  </div>

  <!-- SCRIPTS -->
  <script type="module" src="./teacherBoard.js"></script>

</body>
</html>
