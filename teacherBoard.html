<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartBoardAI PRO ‚Äì –ú“±“ì–∞–ª—ñ–º</title>

  <link rel="stylesheet" href="./main.css" />

  <!-- KaTeX (—Ñ–æ—Ä–º—É–ª–∞ “Ø—à—ñ–Ω) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

  <!-- QR (student “Ø—à—ñ–Ω) -->
  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>

  <!-- Export “Ø—à—ñ–Ω: html2canvas + jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body>

  <!-- –ñ–æ“ì–∞—Ä“ì—ã –ø–∞–Ω–µ–ª—å -->
  <header class="topbar">
    <div class="topbar-left">
      <span class="logo-text">SmartBoardAI PRO 2.0</span>
      <select id="langSelect" class="lang-select">
        <option value="kk">KZ</option>
        <option value="ru">RU</option>
        <option value="en">EN</option>
      </select>
    </div>
    <div class="topbar-right">
      <input id="saveName" class="save-input" type="text" placeholder="–°–∞–±–∞“õ –∞—Ç–∞—É—ã">
      <button id="saveLessonBtn" class="btn small">üíæ –°–∞“õ—Ç–∞—É</button>
      <button id="loadLessonBtn" class="btn small">üìÇ –ñ“Ø–∫—Ç–µ—É</button>

      <!-- EXPORT “ö–´–ó–ú–ï–¢–¢–ï–†–Ü -->
      <button id="exportPdfBtn" class="btn small">üìÑ PDF</button>
      <button id="exportPngBtn" class="btn small">üñº Image</button>
      <button id="shareLessonBtn" class="btn small">üîó Share</button>

      <button id="qrBtn" class="btn small">üì± QR (student)</button>
      <button id="fullscreenToggleBtn" class="btn small">‚õ∂ –¢–æ–ª—ã“õ —ç–∫—Ä–∞–Ω</button>
    </div>
  </header>

  <!-- –ù–µ–≥—ñ–∑–≥—ñ layout -->
  <main class="main-container">
    <!-- –°–æ–ª –∂–∞“õ –ø–∞–Ω–µ–ª—å -->
    <aside class="sidebar">
      <h3 class="toolsTitle">“ö“±—Ä–∞–ª–¥–∞—Ä</h3>

      <div class="card">
        <h4>–ö–æ–Ω—Ç–µ–Ω—Ç –±–ª–æ–∫—Ç–∞—Ä</h4>
        <button id="toolCard" class="btn block-btn">üìÑ –ö–∞—Ä—Ç–æ—á–∫–∞</button>
        <button id="toolFormula" class="btn block-btn">‚àë –§–æ—Ä–º—É–ª–∞</button>
        <button id="toolPhoto" class="btn block-btn">üñº –§–æ—Ç–æ</button>
        <button id="toolVideo" class="btn block-btn">üé¨ –í–∏–¥–µ–æ</button>
        <button id="toolLink" class="btn block-btn">üîó –°—ñ–ª—Ç–µ–º–µ</button>
      </div>

      <div class="card">
        <h4>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤</h4>
        <button id="toolTrainer" class="btn block-btn">üß† –¢—Ä–µ–Ω–∞–∂–µ—Ä</button>
        <button id="toolQuiz" class="btn block-btn">‚ùì –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ (Kahoot —Å—Ç–∏–ª—ñ)</button>
      </div>

      <div class="card">
        <h4>AI –ø–∞–Ω–µ–ª—ñ</h4>
        <div class="ai-mode-switch">
          <button class="ai-mode-btn active" data-mode="lesson">–°–∞–±–∞“õ –∂–æ—Å–ø–∞—Ä—ã</button>
          <button class="ai-mode-btn" data-mode="content">–ö–æ–Ω—Ç–µ–Ω—Ç</button>
          <button class="ai-mode-btn" data-mode="creative">–ö—Ä–µ–∞—Ç–∏–≤</button>
        </div>
        <textarea id="aiPrompt" class="input ai-input" placeholder="–¢–∞–ø—Å—ã—Ä–º–∞“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑..."></textarea>
        <button id="aiRunBtn" class="btn block-btn">‚ú® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è–ª–∞—É</button>
        <div id="aiOutput" class="ai-output">
          <span class="small">AI –∂–∞—É–∞–±—ã –æ—Å—ã–Ω–¥–∞ —à—ã“ì–∞–¥—ã‚Ä¶</span>
        </div>
        <div class="ai-actions">
          <button id="aiInsertBtn" class="btn small">‚¨á –¢–∞“õ—Ç–∞“ì–∞ –µ–Ω–≥—ñ–∑—É</button>
          <button id="aiCopyBtn" class="btn small">üìã –ö”©—à—ñ—Ä—É</button>
          <button id="aiClearBtn" class="btn small">üßπ –¢–∞–∑–∞–ª–∞—É</button>
        </div>
      </div>

      <div class="card">
        <h4>–°–∞–±–∞“õ –∂–æ—Å–ø–∞—Ä—ã (LP)</h4>
        <button id="lessonPlannerBtn" class="btn block-btn">üìë Lesson Planner</button>
      </div>
    </aside>

    <!-- –û—Ä—Ç–∞“£“ì—ã –∞–π–º–∞“õ: DRAWING + BLOCK BOARD -->
    <section class="board-area" id="boardExportRoot">

      <!-- ‚úèÔ∏è DRAWING –¢–ê“ö–¢–ê–°–´ -->
      <div class="drawing-wrapper">
        <div class="drawing-toolbar">
          <span class="drawing-title">‚úèÔ∏è –°—É—Ä–µ—Ç —Å–∞–ª—É —Ç–∞“õ—Ç–∞—Å—ã</span>
          <div class="drawing-tools">
            <button id="drawPenBtn" class="btn tiny active">“ö–∞–ª–∞–º</button>
            <button id="drawMarkerBtn" class="btn tiny">–ú–∞—Ä–∫–µ—Ä</button>
            <button id="drawEraserBtn" class="btn tiny">”®—à—ñ—Ä–≥—ñ—à</button>

            <label class="draw-label">
              üé®
              <input type="color" id="drawColor" value="#111827">
            </label>

            <label class="draw-label">
              ‚ûñ
              <input type="range" id="drawSize" min="2" max="30" value="5">
            </label>

            <button id="drawClearBtn" class="btn tiny">üßπ –¢–∞–∑–∞–ª–∞—É</button>
          </div>
        </div>

        <div class="drawing-canvas-container">
          <canvas id="drawingCanvas"></canvas>
        </div>
      </div>

      <!-- –ö”©–ø –±–µ—Ç tab-—Ç–∞—Ä—ã -->
      <div id="pageTabs" class="page-tabs"></div>

      <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±–ª–æ–∫—Ç–∞—Ä –æ—Ä–Ω–∞–ª–∞—Å–∞—Ç—ã–Ω –∞–π–º–∞“õ -->
      <div id="boardArea" class="board-cards"></div>

      <!-- –û“õ—É—à—ã –∂–∞—É–∞–ø—Ç–∞—Ä—ã -->
      <div class="card">
        <h3 class="answersTitle">–û“õ—É—à—ã –∂–∞—É–∞–ø—Ç–∞—Ä—ã</h3>
        <div id="answersBox" class="answers-box">
          <div class="small">”ò–∑—ñ—Ä—à–µ –∂–∞—É–∞–ø –∂–æ“õ...</div>
        </div>
      </div>
    </section>

    <!-- –û“£ –∂–∞“õ –ø–∞–Ω–µ–ª—å -->
    <aside class="rightbar">
      <div class="card">
        <h3 class="roomTitle">Room ID & –æ“õ—É—à—ã–ª–∞—Ä</h3>
        <p class="small">Room: <code id="roomIdLabel">‚Äì</code></p>
        <button id="createRoomBtn" class="btn small">üü¢ –ñ–∞“£–∞ –±”©–ª–º–µ</button>
      </div>

      <div class="card">
        <h3 class="moodTitle">–≠–º–æ—Ü–∏—è–ª—ã“õ —Ä–µ—Ñ–ª–µ–∫—Å–∏—è</h3>
        <p class="small">–°–º–∞–π–ª–∏–∫ –∞—Ä“õ—ã–ª—ã –∫”©“£—ñ–ª-–∫“Ø–π–¥—ñ –±–∞“ì–∞–ª–∞—É.</p>
        <div id="emojiStats" class="small" style="margin-top:4px;">–î–µ—Ä–µ–∫ –∂–æ“õ‚Ä¶</div>
      </div>

      <div class="card">
        <h3 class="cloudTitle">Word Cloud (—Å”©–∑ –±“±–ª—Ç—ã)</h3>
        <p class="small">–û“õ—É—à—ã–ª–∞—Ä –±—ñ—Ä —Å”©–∑–±–µ–Ω —Å–∞–±–∞“õ —Ç—É—Ä–∞–ª—ã –∂–∞–∑–∞–¥—ã.</p>
        <div id="wordCloud" class="word-cloud"></div>
      </div>
    </aside>
  </main>

  <!-- Lesson Planner MODAL -->
  <div id="lpOverlay" class="lp-overlay lp-hidden"></div>
  <div id="lessonPlannerModal" class="lp-modal lp-hidden">
    <h3>üìë Lesson Planner (AI)</h3>
    <textarea id="lpInput" class="input textarea" placeholder="–°—ã–Ω—ã–ø, —Ç–∞“õ—ã—Ä—ã–ø, –º–∞“õ—Å–∞—Ç—Ç–∞—Ä..."></textarea>
    <div class="lp-actions">
      <button id="lpGenerateBtn" class="btn small">‚ú® –°–∞–±–∞“õ –∂–æ—Å–ø–∞—Ä—ã–Ω “õ“±—Ä—É</button>
      <button id="lpCloseBtn" class="btn small secondary">–ñ–∞–±—É</button>
    </div>
  </div>

  <!-- Trainer MODAL -->
  <div id="trainerOverlay" class="lp-overlay lp-hidden"></div>
  <div id="trainerModal" class="lp-modal lp-hidden">
    <h3>üß† –¢—Ä–µ–Ω–∞–∂–µ—Ä “õ–æ—Å—É</h3>
    <input id="trainerTitleInput" class="input" type="text" placeholder="–¢—Ä–µ–Ω–∞–∂–µ—Ä –∞—Ç–∞—É—ã">
    <input id="trainerUrlInput" class="input" type="text" placeholder="https://... (iframe URL)">
    <div class="lp-actions">
      <button id="trainerAddBtn" class="btn small">“ö–æ—Å—É</button>
      <button id="trainerCloseBtn" class="btn small secondary">–ñ–∞–±—É</button>
    </div>
  </div>

  <!-- QR MODAL -->
  <div id="qrOverlay" class="lp-overlay lp-hidden"></div>
  <div id="qrModal" class="lp-modal lp-hidden">
    <h3>üì± Student QR</h3>
    <canvas id="qrCanvas" style="width:260px;height:260px;display:block;margin:auto;"></canvas>
    <p class="small" style="text-align:center;margin-top:10px;">
      –û“õ—É—à—ã–ª–∞—Ä –æ—Å—ã QR –∞—Ä“õ—ã–ª—ã <b>student.html</b> –ø–∞—Ä–∞“ì—ã–Ω–∞ –∫—ñ—Ä–µ–¥—ñ.
    </p>
    <div class="lp-actions" style="justify-content:center;">
      <button id="qrCloseBtn" class="btn small secondary">–ñ–∞–±—É</button>
    </div>
  </div>

  <!-- SHARE MODAL -->
  <div id="shareOverlay" class="lp-overlay lp-hidden"></div>
  <div id="shareModal" class="lp-modal lp-hidden">
    <h3>üîó –°–∞–±–∞“õ —Å—ñ–ª—Ç–µ–º–µ—Å—ñ</h3>
    <p class="small">–û—Å—ã —Å—ñ–ª—Ç–µ–º–µ–Ω—ñ –±–∞—Å“õ–∞ –º“±“ì–∞–ª—ñ–º–¥–µ—Ä–≥–µ –Ω–µ–º–µ—Å–µ –∫–æ–Ω–∫—É—Ä—Å“õ–∞ –±–µ—Ä–µ –∞–ª–∞—Å—ã–∑.</p>
    <input id="shareLinkInput" class="input" type="text" readonly>
    <div class="lp-actions">
      <button id="shareCopyBtn" class="btn small">üìã –ö”©—à—ñ—Ä—É</button>
      <button id="shareCloseBtn" class="btn small secondary">–ñ–∞–±—É</button>
    </div>
  </div>

  <script type="module" src="./teacherBoard.js"></script>
</body>
</html>
