<!doctype html>
<html lang="kk">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>GEOMETRY LAB PRO ‚Äî 12 –µ—Å–µ–ø (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ + —Ç–∞–ª–¥–∞—É)</title>
  <style>
    :root{
      --bg:#f6f8ff;
      --card:#ffffff;
      --ink:#15204a;
      --muted:#5a6796;
      --line:rgba(21,32,74,.12);
      --shadow:0 18px 45px rgba(16,24,48,.10);
      --ok:#10b981;
      --bad:#ef476f;
      --warn:#f59e0b;
      --accent:#6366f1;
      --chip:#eef2ff;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--ink);
      background:
        radial-gradient(900px 650px at 12% 10%, rgba(99,102,241,.18), transparent 60%),
        radial-gradient(900px 650px at 88% 14%, rgba(16,185,129,.14), transparent 60%),
        radial-gradient(900px 650px at 50% 92%, rgba(245,158,11,.12), transparent 60%),
        var(--bg);
    }
    header{
      position:sticky; top:0; z-index:10;
      background:rgba(246,248,255,.85);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }
    .wrap{max-width:1200px;margin:0 auto;padding:0 16px}
    .top{
      display:flex; gap:14px; justify-content:space-between; align-items:flex-start;
      flex-wrap:wrap; padding:14px 0;
    }
    h1{margin:0;font-size:18px}
    .sub{margin-top:6px;color:var(--muted);font-size:13px;line-height:1.35}
    .grid{display:grid;grid-template-columns:320px 1fr;gap:14px;padding:14px 0 28px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.92));
      border:1px solid var(--line);
      border-radius:16px;
      padding:14px;
      box-shadow:var(--shadow);
    }
    .list{
      display:flex;flex-direction:column;gap:8px;
      max-height:70vh;overflow:auto;padding-right:6px;
    }
    .item{
      border:1px solid var(--line);
      background:#fff;
      border-radius:14px;
      padding:10px;
      cursor:pointer;
      transition:transform .12s ease, filter .12s ease;
    }
    .item:hover{transform:translateY(-1px);filter:brightness(1.01)}
    .item.active{border-color:rgba(99,102,241,.45); background:linear-gradient(180deg,#fff,var(--chip))}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .pill{
      font-size:12px;
      border:1px solid rgba(21,32,74,.14);
      padding:6px 10px;
      border-radius:999px;
      color:var(--muted);
      background:#fff;
    }
    .pill.ok{border-color:rgba(16,185,129,.45); color:rgba(16,185,129,.95)}
    .pill.bad{border-color:rgba(239,71,111,.45); color:rgba(239,71,111,.95)}
    .btn{
      cursor:pointer; user-select:none;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(21,32,74,.14);
      background:linear-gradient(180deg,#fff,#eef2ff);
      color:var(--ink);
      transition:transform .12s ease, filter .12s ease;
    }
    .btn:hover{transform:translateY(-1px);filter:brightness(1.02)}
    .btn.ok{border-color:rgba(16,185,129,.40)}
    .btn.bad{border-color:rgba(239,71,111,.40)}
    .btn.warn{border-color:rgba(245,158,11,.45)}
    .sep{height:1px;background:var(--line);margin:12px 0}
    .muted{color:var(--muted);font-size:13px;line-height:1.45}
    .small{color:var(--muted);font-size:12px;line-height:1.45}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .kpi{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    @media(max-width:720px){.kpi{grid-template-columns:repeat(2,1fr)}}
    .kpi .box{border:1px solid var(--line);border-radius:14px;padding:10px;background:#fff}
    .kpi .n{font-weight:900;font-size:18px}
    .kpi .t{font-size:12px;color:var(--muted)}
    input, select, textarea{
      width:100%;
      padding:10px 10px;
      border-radius:12px;
      border:1px solid rgba(21,32,74,.16);
      background:#fff;
      color:var(--ink);
      outline:none;
    }
    textarea{min-height:90px;resize:vertical}
    .choices{display:grid;gap:8px}
    .choice{
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px;
      background:#fff;
      cursor:pointer;
      display:flex; gap:10px; align-items:flex-start;
    }
    .choice input{width:auto;margin-top:3px}
    details{border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff}
    summary{cursor:pointer}
    .svgBox{
      border:1px solid var(--line);
      background:#fff;
      border-radius:14px;
      padding:10px;
      overflow:hidden;
    }
    .toast{
      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
      background:#fff;border:1px solid var(--line);box-shadow:var(--shadow);
      padding:10px 12px;border-radius:999px;font-size:13px;display:none;z-index:99;
    }
    table{width:100%;border-collapse:collapse}
    th,td{border-bottom:1px solid var(--line);padding:8px 6px;font-size:12px;text-align:left;vertical-align:top}
    th{color:var(--muted);font-weight:700}
  </style>
</head>
<body>
<header>
  <div class="wrap top">
    <div>
      <h1>GEOMETRY LAB PRO ‚Äî 12 –∂–∞—Ç—Ç—ã“ì—É –µ—Å–µ–±—ñ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ + —Ç–∞–ª–¥–∞—É)</h1>
      <div class="sub">
        –ï—Å–µ–ø ‚Üí –°—ã–∑–±–∞ ‚Üí 2 –∫”©–º–µ–∫ ‚Üí –¢–µ–∫—Å–µ—Ä—É/–ö—ñ–ª—Ç ‚Üí –®–µ—à—É –∂–æ–ª—ã ‚Üí –¢–∞–ª–¥–∞—É (“õ–∞—Ç–µ/–∫”©–º–µ–∫/—É–∞“õ—ã—Ç).
        <br><b>11‚Äì12</b> –µ—Å–µ–ø: –ª–æ–≥–∏–∫–∞–ª—ã“õ (–∞–≤—Ç–æ-—Ç–µ–∫—Å–µ—Ä—É –µ–º–µ—Å, “Ø–ª–≥—ñ –∂–∞—É–∞–ø –±–µ—Ä—ñ–ª–≥–µ–Ω).
      </div>
    </div>
    <div class="row">
      <span class="pill" id="timerPill">‚è± 00:00</span>
      <span class="pill" id="statusPill">”ò–ª—ñ —Ç–µ–∫—Å–µ—Ä—ñ–ª–º–µ–¥—ñ</span>
    </div>
  </div>
</header>

<div class="toast" id="toast"></div>

<div class="wrap grid">
  <!-- LEFT -->
  <aside class="card">
    <div class="row">
      <div style="flex:1;min-width:160px">
        <label class="small">–û“õ—É—à—ã</label>
        <input id="studentName" placeholder="–ú—ã—Å–∞–ª—ã: –ê–π–∞—Ä—É"/>
      </div>
      <div style="width:110px">
        <label class="small">–°—ã–Ω—ã–ø</label>
        <input id="studentClass" placeholder="10A"/>
      </div>
    </div>

    <div class="sep"></div>

    <div class="kpi">
      <div class="box"><div class="n" id="kpiDone">0</div><div class="t">–î“±—Ä—ã—Å (–µ—Å–µ–ø)</div></div>
      <div class="box"><div class="n" id="kpiWrong">0</div><div class="t">“ö–∞—Ç–µ</div></div>
      <div class="box"><div class="n" id="kpiHints">0</div><div class="t">–ö”©–º–µ–∫</div></div>
      <div class="box"><div class="n" id="kpiTime">00:00</div><div class="t">–ñ–∞–ª–ø—ã —É–∞“õ—ã—Ç</div></div>
    </div>

    <div class="sep"></div>

    <b>–ï—Å–µ–ø—Ç–µ—Ä —Ç—ñ–∑—ñ–º—ñ</b>
    <div class="small" style="margin-top:6px">–ë–∞—Å—ã“£—ã–∑ ‚Üí –µ—Å–µ–ø –∞—à—ã–ª–∞–¥—ã.</div>
    <div class="sep"></div>
    <div class="list" id="taskList"></div>

    <div class="sep"></div>
    <button class="btn" id="finishBtn">üìä –°–æ“£“ì—ã —Ç–∞–ª–¥–∞—É</button>
    <button class="btn" id="copyBtn">üßæ –ï—Å–µ–ø—Ç—ñ –∫”©—à—ñ—Ä—É</button>
    <button class="btn bad" id="resetBtn">üóë –ë–∞—Ä–ª—ã“ì—ã–Ω —Ç–∞–∑–∞—Ä—Ç—É</button>
  </aside>

  <!-- RIGHT -->
  <main class="card">
    <div class="row" style="justify-content:space-between;align-items:flex-start">
      <div>
        <div class="pill" id="topicPill">–ü–ª–∞–Ω–∏–º–µ—Ç—Ä–∏—è / –ì–µ–æ–º–µ—Ç—Ä–∏—è</div>
        <h2 id="title" style="margin:10px 0 0 0;font-size:18px"></h2>
      </div>
      <div class="row">
        <span class="pill" id="metaPill">”ò—Ä–µ–∫–µ—Ç: 0 ¬∑ “ö–∞—Ç–µ: 0 ¬∑ –ö”©–º–µ–∫: 0</span>
      </div>
    </div>

    <div class="sep"></div>

    <div class="muted" id="statement"></div>

    <div class="sep"></div>

    <div class="svgBox" id="diagram"></div>

    <div class="sep"></div>

    <div id="answerArea"></div>

    <div class="sep"></div>

    <div class="row">
      <button class="btn ok" id="checkBtn">‚úî –¢–µ–∫—Å–µ—Ä—É</button>
      <button class="btn" id="clearBtn">‚Ü∫ –¢–∞–∑–∞—Ä—Ç—É</button>
      <button class="btn warn" id="hint1Btn">üí° –ö”©–º–µ–∫ 1</button>
      <button class="btn warn" id="hint2Btn">üí° –ö”©–º–µ–∫ 2</button>
      <button class="btn bad" id="keyBtn">üëÅ –ñ–∞—É–∞–ø –∫—ñ–ª—Ç—ñ</button>
    </div>

    <details id="hintBox1" style="display:none;margin-top:10px">
      <summary>–ö”©–º–µ–∫ 1</summary>
      <div class="small" id="hint1Text"></div>
    </details>

    <details id="hintBox2" style="display:none;margin-top:10px">
      <summary>–ö”©–º–µ–∫ 2</summary>
      <div class="small" id="hint2Text"></div>
    </details>

    <details id="keyBox" style="display:none;margin-top:10px">
      <summary>–î“±—Ä—ã—Å –∂–∞—É–∞–ø (–∫—ñ–ª—Ç) –∂”ô–Ω–µ —à–µ—à—É –∂–æ–ª—ã</summary>
      <div class="small mono" id="solutionText" style="white-space:pre-wrap"></div>
    </details>

    <div class="sep"></div>
    <div class="small" id="note"></div>
  </main>
</div>

<script>
  const $ = (id)=>document.getElementById(id);

  function toast(msg){
    const el=$("toast");
    el.textContent=msg;
    el.style.display="block";
    clearTimeout(toast._t);
    toast._t=setTimeout(()=>el.style.display="none",2200);
  }
  function fmtTime(sec){
    const m=String(Math.floor(sec/60)).padStart(2,"0");
    const s=String(Math.floor(sec%60)).padStart(2,"0");
    return `${m}:${s}`;
  }
  function setStatus(kind, txt){
    const el=$("statusPill");
    if(kind==="ok"){ el.className="pill ok"; el.textContent=txt; }
    else if(kind==="bad"){ el.className="pill bad"; el.textContent=txt; }
    else { el.className="pill"; el.textContent=txt; }
  }

  // SVG helper (simple clean diagrams)
  function baseSVG(content){
    return `
    <svg viewBox="0 0 520 260" width="100%" height="260" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <style>
          .l{stroke:#15204a;stroke-width:2;fill:none}
          .d{stroke:#6366f1;stroke-width:2;fill:none;stroke-dasharray:6 6}
          .g{stroke:#10b981;stroke-width:2;fill:none}
          .p{fill:#15204a}
          .t{font: 14px ui-monospace, Menlo, Consolas, monospace; fill:#15204a}
          .m{font: 12px ui-monospace, Menlo, Consolas, monospace; fill:#5a6796}
        </style>
      </defs>
      <rect x="0" y="0" width="520" height="260" rx="16" ry="16" fill="#ffffff"/>
      <g transform="translate(20,14)">
        ${content}
      </g>
    </svg>`;
  }

  const TASKS = [
    {
      id:1,
      title:"–ï—Å–µ–ø 1",
      statement:`D –∂”ô–Ω–µ E –Ω“Ø–∫—Ç–µ–ª–µ—Ä—ñ ABC “Ø—à–±“±—Ä—ã—à—ã–Ω—ã“£ —Å”ô–π–∫–µ—Å—ñ–Ω—à–µ A –∂”ô–Ω–µ C —Ç”©–±–µ–ª–µ—Ä—ñ–Ω–µ–Ω —Ç“Ø—Å—ñ—Ä—ñ–ª–≥–µ–Ω –±–∏—ñ–∫—Ç—ñ–∫—Ç–µ—Ä—ñ–Ω—ñ“£ —Ç–∞–±–∞–Ω—ã.
AC “õ–∞–±—ã—Ä“ì–∞—Å—ã–Ω —Ç–∞–±—ã“£—ã–∑, –µ–≥–µ—Ä DC/AC = k, BC = a, AB = b.`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">–°—ã–∑–±–∞ (“õ–∞–ª—ã–ø): A-–¥–∞–Ω BC-“ì–∞ –±–∏—ñ–∫—Ç—ñ–∫</text>
        <line class="l" x1="40" y1="210" x2="460" y2="210"/>
        <circle class="p" cx="40" cy="210" r="4"/><text class="t" x="28" y="235">B</text>
        <circle class="p" cx="460" cy="210" r="4"/><text class="t" x="452" y="235">C</text>
        <circle class="p" cx="300" cy="70" r="4"/><text class="t" x="294" y="60">A</text>
        <line class="l" x1="300" y1="70" x2="40" y2="210"/>
        <line class="l" x1="300" y1="70" x2="460" y2="210"/>
        <circle class="p" cx="300" cy="210" r="4"/><text class="t" x="292" y="235">D</text>
        <line class="d" x1="300" y1="70" x2="300" y2="210"/>
        <text class="m" x="70" y="200">BC = a</text>
        <text class="m" x="160" y="110">AB = b</text>
        <text class="m" x="360" y="130">AC = ?</text>
        <text class="m" x="360" y="200">DC/AC = k</text>
        <rect x="292" y="202" width="16" height="16" fill="none" stroke="#10b981" stroke-width="2"/>
      `),
      mode:"mcq",
      choices:[
        "AC = a¬∑k + ‚àö(b¬≤ ‚àí a¬≤(1 ‚àí k¬≤))",
        "AC = a/k + ‚àö(b¬≤ + a¬≤)",
        "AC = ‚àö(a¬≤ + b¬≤) ‚àí a¬∑k",
        "AC = ‚àö(b¬≤ ‚àí a¬≤) + k"
      ],
      correctIndex:0,
      hint1:"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ “õ–æ–π: B(0,0), C(a,0). D ‚Äî A-–¥–∞–Ω —Ç“Ø—Å—ñ—Ä—ñ–ª–≥–µ–Ω –±–∏—ñ–∫—Ç—ñ–∫—Ç—ñ“£ —Ç–∞–±–∞–Ω—ã –±–æ–ª“ì–∞–Ω–¥—ã“õ—Ç–∞–Ω, A –Ω“Ø–∫—Ç–µ—Å—ñ–Ω—ñ“£ x-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Å—ã D-–º–µ–Ω –±—ñ—Ä–¥–µ–π –±–æ–ª–∞–¥—ã.",
      hint2:"t = DC –¥–µ–ø –∞–ª. –û–Ω–¥–∞ AC¬≤ = t¬≤ + h¬≤. –ë–µ—Ä—ñ–ª–≥–µ–Ω—ñ: t = k¬∑AC. –û—Å—ã–Ω—ã AB¬≤ —Ç–µ“£–¥–µ—É—ñ–Ω–µ “õ–æ–π—ã–ø –∫–≤–∞–¥—Ä–∞—Ç —Ç–µ“£–¥–µ—É —à—ã“ì–∞—Ä–∞—Å—ã“£.",
      solution:`–ë–µ–ª–≥—ñ–ª–µ—É: AC = x, DC = t.
–ë–µ—Ä—ñ–ª–≥–µ–Ω: t/x = k ‚áí t = kx.

B(0,0), C(a,0), D(a‚àít,0), A(a‚àít, h).
AB¬≤ = (a‚àít)¬≤ + h¬≤ = b¬≤
AC¬≤ = t¬≤ + h¬≤ = x¬≤

h¬≤ = x¬≤ ‚àí t¬≤ = x¬≤(1‚àík¬≤)

(–∞ ‚àí kx)¬≤ + x¬≤(1‚àík¬≤) = b¬≤
‚áí a¬≤ ‚àí 2akx + x¬≤ = b¬≤
‚áí x¬≤ ‚àí 2akx + (a¬≤ ‚àí b¬≤)=0

x = ak + ‚àö(b¬≤ ‚àí a¬≤(1 ‚àí k¬≤))  (–æ“£ –º”ô–Ω –∞–ª—ã–Ω–∞–¥—ã).`
    },
    {
      id:2,
      title:"–ï—Å–µ–ø 2",
      statement:`–†–∞–¥–∏—É—Å—Ç–∞—Ä—ã 10 –∂”ô–Ω–µ 17 –±–æ–ª–∞—Ç—ã–Ω —à–µ“£–±–µ—Ä–ª–µ—Ä A –∂”ô–Ω–µ B –Ω“Ø–∫—Ç–µ–ª–µ—Ä—ñ–Ω–¥–µ “õ–∏—ã–ª—ã—Å–∞–¥—ã.
–ï–≥–µ—Ä AB = 16 –±–æ–ª—Å–∞, —à–µ“£–±–µ—Ä–ª–µ—Ä–¥—ñ“£ —Ü–µ–Ω—Ç—Ä–ª–µ—Ä—ñ–Ω—ñ“£ –∞—Ä–∞“õ–∞—à—ã“õ—Ç—ã“ì—ã–Ω —Ç–∞–±—ã“£—ã–∑.`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">–ï–∫—ñ —à–µ“£–±–µ—Ä–¥—ñ“£ –æ—Ä—Ç–∞“õ —Ö–æ—Ä–¥–∞—Å—ã AB</text>
        <circle class="l" cx="190" cy="140" r="90"/>
        <circle class="l" cx="330" cy="140" r="135"/>
        <circle class="p" cx="245" cy="70" r="4"/><text class="t" x="235" y="60">A</text>
        <circle class="p" cx="245" cy="210" r="4"/><text class="t" x="235" y="235">B</text>
        <line class="d" x1="245" y1="70" x2="245" y2="210"/>
        <text class="m" x="255" y="145">AB = 16</text>
        <circle class="p" cx="190" cy="140" r="4"/><text class="t" x="172" y="162">O‚ÇÅ</text>
        <circle class="p" cx="330" cy="140" r="4"/><text class="t" x="338" y="162">O‚ÇÇ</text>
        <line class="g" x1="190" y1="140" x2="330" y2="140"/>
        <text class="m" x="235" y="132">d = ?</text>
      `),
      mode:"input",
      accept:["21","21.0"],
      hint1:"–û—Ä—Ç–∞“õ —Ö–æ—Ä–¥–∞ AB-–¥—ã“£ –æ—Ä—Ç–∞—Å—ã–Ω M –¥–µ–ø –∞–ª. ”ò—Ä —à–µ“£–±–µ—Ä “Ø—à—ñ–Ω OM ‚üÇ AB.",
      hint2:"OM = ‚àö(R¬≤ ‚àí (AB/2)¬≤). –°–æ–Ω–¥–∞ d = OM‚ÇÅ + OM‚ÇÇ.",
      solution:`AB/2 = 8.
OM‚ÇÅ = ‚àö(10¬≤ ‚àí 8¬≤) = ‚àö(100‚àí64) = 6
OM‚ÇÇ = ‚àö(17¬≤ ‚àí 8¬≤) = ‚àö(289‚àí64) = ‚àö225 = 15
d = OM‚ÇÅ + OM‚ÇÇ = 6 + 15 = 21.`
    },
    {
      id:3,
      title:"–ï—Å–µ–ø 3",
      statement:`ABC —Ç—ñ–∫–±“±—Ä—ã—à—Ç—ã “Ø—à–±“±—Ä—ã—à—ã–Ω–¥–∞ B —Ç”©–±–µ—Å—ñ —Ç—ñ–∫ –±“±—Ä—ã—à.
A —Ç”©–±–µ—Å—ñ–Ω–¥–µ–≥—ñ –±“±—Ä—ã—à Œ±, D ‚Äî –≥–∏–ø–æ—Ç–µ–Ω—É–∑–∞ –æ—Ä—Ç–∞—Å—ã.
C' –Ω“Ø–∫—Ç–µ—Å—ñ BD —Ç“Ø–∑—É—ñ–Ω–µ “õ–∞—Ç—ã—Å—Ç—ã C –Ω“Ø–∫—Ç–µ—Å—ñ–Ω–µ —Å–∏–º–º–µ—Ç—Ä–∏—è–ª—ã.
‚à†AC'B –±“±—Ä—ã—à—ã–Ω —Ç–∞–±—ã“£—ã–∑.`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">–¢—ñ–∫–±“±—Ä—ã—à—Ç—ã “Ø—à–±“±—Ä—ã—à –∂”ô–Ω–µ BD ‚Äî —Å–∏–º–º–µ—Ç—Ä–∏—è –æ—Å—ñ</text>
        <circle class="p" cx="80" cy="210" r="4"/><text class="t" x="70" y="235">B</text>
        <circle class="p" cx="420" cy="210" r="4"/><text class="t" x="412" y="235">A</text>
        <circle class="p" cx="80" cy="60" r="4"/><text class="t" x="70" y="52">C</text>
        <line class="l" x1="80" y1="210" x2="420" y2="210"/>
        <line class="l" x1="80" y1="210" x2="80" y2="60"/>
        <line class="l" x1="420" y1="210" x2="80" y2="60"/>
        <rect x="70" y="200" width="20" height="20" fill="none" stroke="#10b981" stroke-width="2"/>
        <circle class="p" cx="250" cy="135" r="4"/><text class="t" x="238" y="130">D</text>
        <line class="d" x1="80" y1="210" x2="250" y2="135"/>
        <circle class="p" cx="170" cy="165" r="4"/><text class="t" x="154" y="162">C'</text>
        <line class="d" x1="250" y1="135" x2="170" y2="165"/>
        <text class="m" x="355" y="195">‚à†A = Œ±</text>
      `),
      mode:"mcq",
      choices:[
        "‚à†AC'B = 90¬∞ + Œ± (–µ–≥–µ—Ä Œ± < 45¬∞), –∞–ª Œ± > 45¬∞ –±–æ–ª—Å–∞ ‚à†AC'B = 90¬∞ ‚àí Œ±",
        "‚à†AC'B = Œ±",
        "‚à†AC'B = 90¬∞ ‚àí Œ± –±–∞—Ä–ª—ã“õ –∂–∞“ì–¥–∞–π–¥–∞",
        "‚à†AC'B = 180¬∞ ‚àí Œ±"
      ],
      correctIndex:0,
      hint1:"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ “õ–æ–π: B(0,0), A(p,0), C(0,q). BD ‚Äî (p,q) –±–∞“ì—ã—Ç—ã –±–æ–π—ã–Ω—à–∞ —Ç“Ø–∑—É.",
      hint2:"–ù“Ø–∫—Ç–µ–Ω—ñ —Ç“Ø–∑—É–≥–µ “õ–∞—Ç—ã—Å—Ç—ã —à–∞“ì—ã–ª–¥—ã—Ä—É —Ñ–æ—Ä–º—É–ª–∞—Å—ã –∞—Ä“õ—ã–ª—ã C' —Ç–∞–±—ã–ª—ã–ø, –∫–µ–π—ñ–Ω ‚à†AC'B –µ—Å–µ–ø—Ç–µ–ª–µ–¥—ñ.",
      solution:`B(0,0), A(p,0), C(0,q), tanŒ±=q/p.
D ‚Äî AC –æ—Ä—Ç–∞—Å—ã ‚áí BD —Ç“Ø–∑—É—ñ–Ω—ñ“£ –±–∞“ì—ã—Ç—ã (p,q).

C –Ω“Ø–∫—Ç–µ—Å—ñ–Ω BD-“ì–∞ “õ–∞—Ç—ã—Å—Ç—ã —à–∞“ì—ã–ª–¥—ã—Ä—Å–∞“õ, ‚à†AC'B:
Œ±<45¬∞ –±–æ–ª—Å–∞ ‚Äî –±“±—Ä—ã—à –¥–æ“ì–∞–ª –±–æ–ª–∞–¥—ã: 90¬∞+Œ±
Œ±>45¬∞ –±–æ–ª—Å–∞ ‚Äî –±“±—Ä—ã—à —Å“Ø–π—ñ—Ä –±–æ–ª–∞–¥—ã: 90¬∞‚àíŒ±
Œ±=45¬∞ –±–æ–ª—Å–∞: 90¬∞.`
    },
    {
      id:4,
      title:"–ï—Å–µ–ø 4",
      statement:`ABC “Ø—à–±“±—Ä—ã—à—ã–Ω–¥–∞ BM –º–µ–¥–∏–∞–Ω–∞—Å—ã AH –±–∏—ñ–∫—Ç—ñ–≥—ñ–Ω–µ —Ç–µ“£.
‚à†MBC –±“±—Ä—ã—à—ã–Ω —Ç–∞–±—ã“£—ã–∑. (M ‚Äî AC-–Ω—ã“£ –æ—Ä—Ç–∞—Å—ã, H ‚Äî A-–¥–∞–Ω BC-“ì–∞ —Ç“Ø—Å—ñ—Ä—ñ–ª–≥–µ–Ω –±–∏—ñ–∫—Ç—ñ–∫—Ç—ñ“£ —Ç–∞–±–∞–Ω—ã)`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">BM = AH —à–∞—Ä—Ç—ã –±“±—Ä—ã—à—Ç—ã –±–µ–∫—ñ—Ç–µ–¥—ñ</text>
        <line class="l" x1="60" y1="210" x2="460" y2="210"/>
        <circle class="p" cx="60" cy="210" r="4"/><text class="t" x="50" y="235">B</text>
        <circle class="p" cx="460" cy="210" r="4"/><text class="t" x="452" y="235">C</text>
        <circle class="p" cx="320" cy="70" r="4"/><text class="t" x="312" y="60">A</text>
        <line class="l" x1="320" y1="70" x2="60" y2="210"/>
        <line class="l" x1="320" y1="70" x2="460" y2="210"/>
        <circle class="p" cx="320" cy="210" r="4"/><text class="t" x="312" y="235">H</text>
        <line class="d" x1="320" y1="70" x2="320" y2="210"/>
        <rect x="312" y="202" width="16" height="16" fill="none" stroke="#10b981" stroke-width="2"/>
        <circle class="p" cx="390" cy="140" r="4"/><text class="t" x="382" y="135">M</text>
        <line class="g" x1="60" y1="210" x2="390" y2="140"/>
        <text class="m" x="250" y="125">BM = AH</text>
      `),
      mode:"input",
      accept:["30","30¬∞","30 deg","30deg"],
      hint1:"BC —Ç“Ø–∑—É—ñ–Ω –æ—Å—å –¥–µ–ø –∞–ª—ã–ø, A(x,y) –¥–µ–ø –±–µ–ª–≥—ñ–ª–µ. AH = y.",
      hint2:"M ‚Äî AC –æ—Ä—Ç–∞—Å—ã ‚áí BM “±–∑—ã–Ω–¥—ã“ì—ã–Ω —à—ã“ì–∞—Ä—ã–ø, BM=AH —à–∞—Ä—Ç—ã–Ω “õ–æ–π—Å–∞“£, tan‚à†MBC = 1/‚àö3 —à—ã“ì–∞–¥—ã.",
      solution:`B(0,0), C(c,0), A(x,y). AH = y.
M ‚Äî AC –æ—Ä—Ç–∞—Å—ã ‚áí M((x+c)/2, y/2).
BM¬≤ = ((x+c)/2)¬≤ + (y/2)¬≤.

BM = AH ‚áí BM¬≤ = y¬≤
‚áí ((x+c)¬≤ + y¬≤)/4 = y¬≤
‚áí (x+c)¬≤ = 3y¬≤
tan‚à†MBC = (y/2)/((x+c)/2) = y/(x+c) = 1/‚àö3
‚áí ‚à†MBC = 30¬∞.`
    },
    {
      id:5,
      title:"–ï—Å–µ–ø 5",
      statement:`H –Ω“Ø–∫—Ç–µ—Å—ñ ABC “Ø—à–±“±—Ä—ã—à—ã–Ω—ã“£ –±–∏—ñ–∫—Ç—ñ–∫—Ç–µ—Ä—ñ–Ω—ñ“£ “õ–∏—ã–ª—ã—Å—É –Ω“Ø–∫—Ç–µ—Å—ñ (–æ—Ä—Ç–æ—Ü–µ–Ω—Ç—Ä).
ABC “Ø—à–±“±—Ä—ã—à—ã–Ω–∞ —Å—ã—Ä—Ç—Ç–∞–π —Å—ã–∑—ã–ª“ì–∞–Ω —à–µ“£–±–µ—Ä–¥—ñ“£ —Ä–∞–¥–∏—É—Å—ã CH –∫–µ—Å—ñ–Ω–¥—ñ—Å—ñ–Ω–µ —Ç–µ“£ –±–æ–ª—Å–∞, ‚à†ACB –±“±—Ä—ã—à—ã–Ω —Ç–∞–±—ã“£—ã–∑.`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">CH = R ‚áí –±“±—Ä—ã—à –±–µ–∫—ñ—Ç—ñ–ª–µ–¥—ñ</text>
        <circle class="l" cx="270" cy="140" r="95"/>
        <circle class="p" cx="160" cy="195" r="4"/><text class="t" x="150" y="220">A</text>
        <circle class="p" cx="380" cy="195" r="4"/><text class="t" x="372" y="220">B</text>
        <circle class="p" cx="270" cy="50" r="4"/><text class="t" x="262" y="42">C</text>
        <circle class="p" cx="270" cy="120" r="4"/><text class="t" x="262" y="116">H</text>
        <line class="g" x1="270" y1="50" x2="270" y2="120"/>
        <text class="m" x="290" y="90">CH = R</text>
      `),
      mode:"input",
      accept:["60","60¬∞","60deg","60 deg"],
      hint1:"–§–∞–∫—Ç: –æ—Ä—Ç–æ—Ü–µ–Ω—Ç—Ä–≥–µ –¥–µ–π—ñ–Ω–≥—ñ “õ–∞—à—ã“õ—Ç—ã“õ: CH = 2R¬∑cosC.",
      hint2:"CH = R ‚áí 2R cosC = R ‚áí cosC = 1/2.",
      solution:`–¢–µ–æ—Ä–µ–º–∞: CH = 2R¬∑cosC.
–ë–µ—Ä—ñ–ª–≥–µ–Ω: CH = R.
‚áí 2R¬∑cosC = R
‚áí cosC = 1/2
‚áí ‚à†ACB = 60¬∞.`
    },
    {
      id:6,
      title:"–ï—Å–µ–ø 6",
      statement:`ABCD —Ç—Ä–∞–ø–µ—Ü–∏—è—Å—ã–Ω—ã“£ –±“Ø–π—ñ—Ä “õ–∞–±—ã—Ä“ì–∞–ª–∞—Ä—ã AB = 18, CD = 17 –∂”ô–Ω–µ –∂–æ“ì–∞—Ä“ì—ã —Ç–∞–±–∞–Ω—ã BC = 5.
cos‚à†ABC = ‚àí1/3 –µ–∫–µ–Ω—ñ –±–µ–ª–≥—ñ–ª—ñ.
BD –¥–∏–∞–≥–æ–Ω–∞–ª—ñ–Ω —Ç–∞–±—ã“£—ã–∑.`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ ”ô–¥—ñ—Å—ñ –µ“£ —Ç–µ–∑</text>
        <polyline class="l" points="80,170 150,60 370,60 420,170 80,170"/>
        <text class="t" x="64" y="188">A</text>
        <text class="t" x="138" y="52">B</text>
        <text class="t" x="370" y="52">C</text>
        <text class="t" x="424" y="188">D</text>
        <line class="g" x1="150" y1="60" x2="420" y2="170"/>
        <text class="m" x="250" y="135">BD = ?</text>
        <text class="m" x="165" y="95">AB=18</text>
        <text class="m" x="345" y="95">CD=17</text>
        <text class="m" x="245" y="48">BC=5</text>
        <text class="m" x="155" y="115">cos‚à†ABC=-1/3</text>
      `),
      mode:"input",
      accept:["18","18.0"],
      hint1:"B-–Ω—ñ (0,0), C-–Ω—ñ (5,0) –¥–µ–ø –∞–ª. BA –≤–µ–∫—Ç–æ—Ä—ã–Ω—ã“£ x-–ø—Ä–æ–µ–∫—Ü–∏—è—Å—ã–Ω –∫–æ—Å–∏–Ω—É—Å –∞—Ä“õ—ã–ª—ã —Ç–∞–ø.",
      hint2:"BA¬∑BC = |BA||BC|cos ‚áí BA_x/18 = -1/3 ‚áí BA_x=-6. –ë–∏—ñ–∫—Ç—ñ–∫ h = ‚àö(18¬≤-6¬≤)=12‚àö2.",
      solution:`B(0,0), C(5,0).
cos‚à†ABC = (BA¬∑BC)/(|BA||BC|) = BA_x/18 = -1/3 ‚áí BA_x = -6.
|BA|=18 ‚áí h = ‚àö(18¬≤‚àí6¬≤)=‚àö288=12‚àö2.
A(-6, -h). D(x, -h), |CD|=17:
(x‚àí5)¬≤ + h¬≤ = 17¬≤ ‚áí (x‚àí5)¬≤ + 288 = 289 ‚áí (x‚àí5)¬≤=1 ‚áí x=6 (–¥”ô—Å—Ç“Ø—Ä–ª—ñ –æ—Ä–Ω–∞–ª–∞—Å—É).
BD = ‚àö(6¬≤ + (12‚àö2)¬≤) = ‚àö(36+288)=‚àö324=18.`
    },
    {
      id:7,
      title:"–ï—Å–µ–ø 7",
      statement:`–¢–∞–±–∞–Ω–¥–∞—Ä—ã AD –∂”ô–Ω–µ BC –±–æ–ª–∞—Ç—ã–Ω —Ç—Ä–∞–ø–µ—Ü–∏—è–¥–∞ AB –∂”ô–Ω–µ CD –±“Ø–π—ñ—Ä “õ–∞–±—ã—Ä“ì–∞–ª–∞—Ä—ã–Ω–¥–∞ —Å”ô–π–∫–µ—Å—ñ–Ω—à–µ P –∂”ô–Ω–µ Q –Ω“Ø–∫—Ç–µ–ª–µ—Ä—ñ –±–µ–ª–≥—ñ–ª–µ–Ω–≥–µ–Ω.
PQ —Ç“Ø–∑—É—ñ —Ç—Ä–∞–ø–µ—Ü–∏—è–Ω—ã –∞—É–¥–∞–Ω–¥–∞—Ä—ã–Ω—ã“£ “õ–∞—Ç—ã–Ω–∞—Å—ã 1:2 –±–æ–ª–∞—Ç—ã–Ω–¥–∞–π –µ–∫—ñ –±”©–ª—ñ–∫–∫–µ –±”©–ª–µ–¥—ñ.
–ï–≥–µ—Ä AD = a –∂”ô–Ω–µ BC = b –±–æ–ª—Å–∞, PQ —Ç–∞–±—ã“£—ã–∑.
(–ë“±–ª –∂–µ—Ä–¥–µ 1:2 ‚Äî —Ç”©–º–µ–Ω–≥—ñ –±”©–ª—ñ–∫ : –∂–æ“ì–∞—Ä“ì—ã –±”©–ª—ñ–∫ –¥–µ–ø –∞–ª–∞–º—ã–∑.)`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">PQ —Ç–∞–±–∞–Ω“ì–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å –∫–µ—Å—ñ–Ω–¥—ñ</text>
        <polyline class="l" points="90,185 160,60 360,60 430,185 90,185"/>
        <line class="g" x1="125" y1="140" x2="395" y2="140"/>
        <text class="t" x="74" y="202">A</text>
        <text class="t" x="150" y="52">B</text>
        <text class="t" x="360" y="52">C</text>
        <text class="t" x="434" y="202">D</text>
        <text class="m" x="200" y="210">AD = a</text>
        <text class="m" x="240" y="48">BC = b</text>
        <text class="m" x="245" y="132">PQ = x</text>
        <circle class="p" cx="125" cy="140" r="4"/><text class="t" x="112" y="135">P</text>
        <circle class="p" cx="395" cy="140" r="4"/><text class="t" x="404" y="135">Q</text>
        <text class="m" x="175" y="160">S‚ÇÅ:S‚ÇÇ = 1:2</text>
      `),
      mode:"mcq",
      choices:[
        "PQ = ‚àö((2a¬≤ + b¬≤)/3)",
        "PQ = (a+b)/3",
        "PQ = ‚àö(ab)",
        "PQ = ‚àö((a¬≤ + 2b¬≤)/3)"
      ],
      correctIndex:0,
      hint1:"PQ —Ç–∞–±–∞–Ω–¥–∞—Ä“ì–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å ‚áí —Ç—Ä–∞–ø–µ—Ü–∏—è–Ω—ã“£ ¬´“õ–∏–º–∞—Å—ã¬ª “±–∑—ã–Ω–¥—ã“õ –±–æ–π—ã–Ω—à–∞ —Å—ã–∑—ã“õ—Ç—ã ”©–∑–≥–µ—Ä–µ–¥—ñ.",
      hint2:"–ê—É–¥–∞–Ω “õ–∞—Ç—ã–Ω–∞—Å—ã –∞—Ä“õ—ã–ª—ã: (x¬≤ ‚àí a¬≤) : (b¬≤ ‚àí x¬≤) = 1:2 –µ–º–µ—Å, —Ç—ñ–∫–µ–ª–µ–π —Ñ–æ—Ä–º—É–ª–∞“ì–∞ –∫–µ–ª—Ç—ñ—Ä—É–≥–µ –±–æ–ª–∞–¥—ã: x¬≤ ‚àí a¬≤ = (b¬≤ ‚àí a¬≤)/3.",
      solution:`PQ “±–∑—ã–Ω–¥—ã“ì—ã–Ω x –¥–µ–ø –∞–ª–∞–π—ã“õ. PQ —Ç–∞–±–∞–Ω–¥–∞—Ä“ì–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å.

–¢”©–º–µ–Ω–≥—ñ –±”©–ª—ñ–∫—Ç—ñ“£ (AD –º–µ–Ω PQ –∞—Ä–∞—Å—ã–Ω–¥–∞“ì—ã) “Ø–ª–µ—Å—ñ 1/3:
S‚ÇÅ / S = 1/3.

“∞“õ—Å–∞—Å—Ç—ã“õ/—Å—ã–∑—ã“õ—Ç—ã“õ ”©–∑–≥–µ—Ä—ñ—Å –∞—Ä“õ—ã–ª—ã:
x¬≤ ‚àí a¬≤ = (b¬≤ ‚àí a¬≤)/3
‚áí x¬≤ = a¬≤ + (b¬≤ ‚àí a¬≤)/3 = (2a¬≤ + b¬≤)/3
‚áí PQ = ‚àö((2a¬≤ + b¬≤)/3).`
    },
    {
      id:8,
      title:"–ï—Å–µ–ø 8",
      statement:`ABC “Ø—à–±“±—Ä—ã—à—ã–Ω–∞ O —Ü–µ–Ω—Ç—Ä—ñ –∂”ô–Ω–µ ‚à†AOC = 60¬∞ –±–æ–ª–∞—Ç—ã–Ω —Å—ã—Ä—Ç—Ç–∞–π —à–µ“£–±–µ—Ä —Å—ã–∑—ã–ª“ì–∞–Ω.
ABC “Ø—à–±“±—Ä—ã—à—ã–Ω–∞ —Ü–µ–Ω—Ç—Ä—ñ Q –Ω“Ø–∫—Ç–µ–¥–µ –±–æ–ª–∞—Ç—ã–Ω —ñ—à—Ç–µ–π —à–µ“£–±–µ—Ä —Å—ã–∑—ã–ª“ì–∞–Ω.
‚à†AQC –±“±—Ä—ã—à—ã–Ω —Ç–∞–±—ã“£—ã–∑.`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">‚à†AQC = 90¬∞ + ‚à†B/2</text>
        <circle class="l" cx="270" cy="135" r="95"/>
        <circle class="p" cx="190" cy="190" r="4"/><text class="t" x="180" y="215">A</text>
        <circle class="p" cx="350" cy="190" r="4"/><text class="t" x="342" y="215">C</text>
        <circle class="p" cx="270" cy="50" r="4"/><text class="t" x="262" y="42">B</text>
        <circle class="p" cx="270" cy="135" r="4"/><text class="t" x="262" y="155">O</text>
        <line class="g" x1="270" y1="135" x2="190" y2="190"/>
        <line class="g" x1="270" y1="135" x2="350" y2="190"/>
        <text class="m" x="290" y="120">‚à†AOC=60¬∞</text>
        <circle class="p" cx="270" cy="125" r="4"/><text class="t" x="262" y="120">Q</text>
      `),
      mode:"input",
      accept:["105","105¬∞","105deg","105 deg"],
      hint1:"–§–∞–∫—Ç: –∏–Ω—Ü–µ–Ω—Ç—Ä “Ø—à—ñ–Ω ‚à†AQC = 90¬∞ + ‚à†B/2.",
      hint2:"–°—ã—Ä—Ç—Ç–∞–π —à–µ“£–±–µ—Ä–¥–µ: AC “õ–∞–±—ã—Ä“ì–∞—Å—ã–Ω–∞ —Å”ô–π–∫–µ—Å –æ—Ä—Ç–∞–ª—ã“õ –±“±—Ä—ã—à 60¬∞ ‚áí ‚à†B = 30¬∞ (”ô–¥–µ—Ç—Ç–µ “Ø—à–±“±—Ä—ã—à —Å“Ø–π—ñ—Ä –¥–µ–ø –∞–ª—ã–Ω–∞–¥—ã).",
      solution:`–ò–Ω—Ü–µ–Ω—Ç—Ä “õ–∞—Å–∏–µ—Ç—ñ: ‚à†AQC = 90¬∞ + ‚à†B/2.

–°—ã—Ä—Ç—Ç–∞–π —à–µ“£–±–µ—Ä–¥–µ ‚à†AOC = 60¬∞ ‚Äî AC —Ö–æ—Ä–¥–∞—Å—ã–Ω—ã“£ –æ—Ä—Ç–∞–ª—ã“õ –±“±—Ä—ã—à—ã.
–°–æ–ª —Ö–æ—Ä–¥–∞“ì–∞ —Ç—ñ—Ä–µ–ª–µ—Ç—ñ–Ω —à–µ“£–±–µ—Ä–ª—ñ–∫ –±“±—Ä—ã—à ‚à†ABC = 30¬∞ (—Å“Ø–π—ñ—Ä –∂–∞“ì–¥–∞–π).

–°–æ–Ω–¥–∞ ‚à†AQC = 90¬∞ + 30¬∞/2 = 90¬∞ + 15¬∞ = 105¬∞.`
    },
    {
      id:9,
      title:"–ï—Å–µ–ø 9",
      statement:`ABC “Ø—à–±“±—Ä—ã—à—ã–Ω–∞ —Ä–∞–¥–∏—É—Å—ã 12 –±–æ–ª–∞—Ç—ã–Ω —Å—ã—Ä—Ç—Ç–∞–π —à–µ“£–±–µ—Ä —Å—ã–∑—ã–ª“ì–∞–Ω.
–ï–≥–µ—Ä AB = 6, BC = 4 –±–æ–ª—Å–∞, AC-–Ω—ã —Ç–∞–±—ã“£—ã–∑.`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">R=12, AB=6, BC=4 ‚áí AC=?</text>
        <circle class="l" cx="270" cy="135" r="95"/>
        <circle class="p" cx="190" cy="190" r="4"/><text class="t" x="180" y="215">A</text>
        <circle class="p" cx="350" cy="190" r="4"/><text class="t" x="342" y="215">B</text>
        <circle class="p" cx="270" cy="50" r="4"/><text class="t" x="262" y="42">C</text>
        <line class="l" x1="190" y1="190" x2="350" y2="190"/>
        <line class="l" x1="350" y1="190" x2="270" y2="50"/>
        <line class="l" x1="270" y1="50" x2="190" y2="190"/>
        <text class="m" x="250" y="232">R=12</text>
        <text class="m" x="255" y="182">AB=6</text>
        <text class="m" x="320" y="112">BC=4</text>
        <text class="m" x="200" y="112">AC=?</text>
      `),
      mode:"mcq",
      choices:[
        "AC = ‚àö15 + ‚àö35",
        "AC = ‚àö51",
        "AC = 10",
        "AC = 24"
      ],
      correctIndex:0,
      hint1:"–ö–µ“£–µ–π—Ç—ñ–ª–≥–µ–Ω —Å–∏–Ω—É—Å—Ç–∞—Ä —Ç–µ–æ—Ä–µ–º–∞—Å—ã: a = 2R¬∑sinA, b = 2R¬∑sinB, c = 2R¬∑sinC.",
      hint2:"sinA = BC/(2R)=4/24=1/6, sinC = AB/(2R)=6/24=1/4. B=180-(A+C), sinB=sin(A+C).",
      solution:`R=12 ‚áí 2R=24.
AB=6 ‚áí sinC = 6/24 = 1/4 ‚áí cosC = ‚àö(1‚àí1/16)=‚àö15/4
BC=4 ‚áí sinA = 4/24 = 1/6 ‚áí cosA = ‚àö(1‚àí1/36)=‚àö35/6

B = 180¬∞ ‚àí (A+C) ‚áí sinB = sin(A+C)
sinB = sinA cosC + cosA sinC
     = (1/6)(‚àö15/4) + (‚àö35/6)(1/4)
     = (‚àö15 + ‚àö35)/24

AC = 2R¬∑sinB = 24 * (‚àö15 + ‚àö35)/24 = ‚àö15 + ‚àö35.`
    },
    {
      id:10,
      title:"–ï—Å–µ–ø 10",
      statement:`–¢–∞–±–∞–Ω–¥–∞—Ä—ã 14 –∂”ô–Ω–µ 40 –±–æ–ª–∞—Ç—ã–Ω —Ç—Ä–∞–ø–µ—Ü–∏—è —Ä–∞–¥–∏—É—Å—ã 25-–∫–µ —Ç–µ“£ —à–µ“£–±–µ—Ä–≥–µ —Å—ã—Ä—Ç—Ç–∞–π —Å—ã–∑—ã–ª“ì–∞–Ω.
–¢—Ä–∞–ø–µ—Ü–∏—è–Ω—ã“£ –±–∏—ñ–∫—Ç—ñ–≥—ñ–Ω —Ç–∞–±—ã“£—ã–∑.`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">–°—ã—Ä—Ç—Ç–∞–π —Å—ã–∑—ã–ª“ì–∞–Ω —Ç—Ä–∞–ø–µ—Ü–∏—è (–∂–∞–Ω–∞–º–∞–ª—ã)</text>
        <polyline class="l" points="90,185 170,60 350,60 430,185 90,185"/>
        <circle class="g" cx="260" cy="135" r="55"/>
        <text class="m" x="235" y="198">AD = 40</text>
        <text class="m" x="245" y="48">BC = 14</text>
        <text class="m" x="320" y="135">r = 25</text>
        <text class="m" x="245" y="115">h = ?</text>
      `),
      mode:"input",
      accept:["50","50¬∞","50.0"],
      hint1:"–ñ–∞–Ω–∞–º–∞–ª—ã —Ç”©—Ä—Ç–±“±—Ä—ã—à “Ø—à—ñ–Ω: “õ–∞—Ä—Å—ã –∂–∞—Ç“õ–∞–Ω “õ–∞–±—ã—Ä“ì–∞–ª–∞—Ä “õ–æ—Å—ã–Ω–¥—ã–ª–∞—Ä—ã —Ç–µ“£. –î–µ–º–µ–∫, —Ç–∞–±–∞–Ω–¥–∞—Ä “õ–æ—Å—ã–Ω–¥—ã—Å—ã = –±“Ø–π—ñ—Ä–ª–µ—Ä “õ–æ—Å—ã–Ω–¥—ã—Å—ã.",
      hint2:"–ê—É–¥–∞–Ω —Ñ–æ—Ä–º—É–ª–∞—Å—ã: S = r¬∑s (r ‚Äî —ñ—à—Ç–µ–π —à–µ“£–±–µ—Ä —Ä–∞–¥–∏—É—Å—ã, s ‚Äî –∂–∞—Ä—Ç—ã –ø–µ—Ä–∏–º–µ—Ç—Ä). –°–æ–Ω—ã–º–µ–Ω “õ–∞—Ç–∞—Ä S = (a+b)/2 ¬∑ h.",
      solution:`–¢–∞–±–∞–Ω–¥–∞—Ä: 14 –∂”ô–Ω–µ 40 ‚áí a+b = 54.
–ñ–∞–Ω–∞–º–∞–ª—ã —Ç—Ä–∞–ø–µ—Ü–∏—è–¥–∞: –±“Ø–π—ñ—Ä–ª–µ—Ä “õ–æ—Å—ã–Ω–¥—ã—Å—ã –¥–∞ 54 ‚áí –ø–µ—Ä–∏–º–µ—Ç—Ä P = 54+54 = 108.
–ñ–∞—Ä—Ç—ã –ø–µ—Ä–∏–º–µ—Ç—Ä s = 54.

–ê—É–¥–∞–Ω: S = r¬∑s = 25¬∑54 = 1350.
–ê–ª S = (14+40)/2 ¬∑ h = 27h.
27h = 1350 ‚áí h = 50.`
    },
    {
      id:11,
      title:"–ï—Å–µ–ø 11",
      statement:`–¢—ñ–∫—Ç”©—Ä—Ç–±“±—Ä—ã—à –ø—ñ—à—ñ–Ω–¥—ñ —Ç–æ—Ä—Ç “Ø—Å—Ç—ñ–Ω–µ —à–æ–∫–æ–ª–∞–¥ “õ–æ–π—ã–ª“ì–∞–Ω.
–®–æ–∫–æ–ª–∞–¥ —Ç–∞ —Ç–µ“£ –µ–∫—ñ –±”©–ª—ñ–∫–∫–µ –±”©–ª—ñ–Ω–µ—Ç—ñ–Ω–¥–µ–π, —Ç–æ—Ä—Ç—Ç—ã –±—ñ—Ä —Ç“Ø–∑—É –∫–µ—Å—É–º–µ–Ω —Ç–µ“£ –µ–∫—ñ –±”©–ª—ñ–∫–∫–µ –±”©–ª—É–≥–µ –±–æ–ª–∞ –º–∞?
(–ñ–∞—É–∞–±—ã“£—ã–∑–¥—ã –Ω–µ–≥—ñ–∑–¥–µ“£—ñ–∑.)`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">–õ–æ–≥–∏–∫–∞–ª—ã“õ –µ—Å–µ–ø: —Å–∏–º–º–µ—Ç—Ä–∏—è/–æ—Ä—Ç–∞–ª—ã“õ</text>
        <rect class="l" x="90" y="60" width="340" height="160" rx="8"/>
        <rect x="220" y="120" width="80" height="40" rx="6" fill="#5a3a2a" opacity="0.35" stroke="#5a3a2a"/>
        <line class="d" x1="90" y1="140" x2="430" y2="140"/>
        <text class="m" x="95" y="245">–ú—ã—Å–∞–ª –∫–µ—Å—É: —Ç—ñ–∫/–∫”©–ª–¥–µ–Ω–µ“£/–¥–∏–∞–≥–æ–Ω–∞–ª—å</text>
      `),
      mode:"text",
      hint1:"–ï–≥–µ—Ä —à–æ–∫–æ–ª–∞–¥ –±—ñ—Ä –∞–π–º–∞“õ—Ç–∞ –±–æ–ª—Å–∞ –¥–∞, —Ç–æ—Ä—Ç—Ç—ã —Ç–µ“£ –±”©–ª—É “Ø—à—ñ–Ω –∫–µ—Å—É —Å—ã–∑—ã“ì—ã —Ç–æ—Ä—Ç—Ç—ã“£ —Ü–µ–Ω—Ç—Ä—ñ–Ω–µ–Ω ”©—Ç—É—ñ –∫–µ—Ä–µ–∫.",
      hint2:"–®–æ–∫–æ–ª–∞–¥—Ç—ã –¥–∞ —Ç–µ“£ –±”©–ª—É “Ø—à—ñ–Ω –∫–µ—Å—É —Å—ã–∑—ã“ì—ã —à–æ–∫–æ–ª–∞–¥—Ç—ã“£ ¬´–∞—É–¥–∞–Ω —Ü–µ–Ω—Ç—Ä—ñ–Ω–µ–Ω¬ª (—Å–∏–º–º–µ—Ç—Ä–∏—è—Å—ã –±–æ–ª—Å–∞) ”©—Ç—É—ñ “õ–∞–∂–µ—Ç.",
      solution:`“Æ–ª–≥—ñ –∂–∞—É–∞–ø (–∏–¥–µ—è):
‚Äî –¢–æ—Ä—Ç—Ç—ã —Ç–µ“£ –±”©–ª—É “Ø—à—ñ–Ω –∫–µ—Å—É —Å—ã–∑—ã“ì—ã –º—ñ–Ω–¥–µ—Ç—Ç—ñ —Ç“Ø—Ä–¥–µ —Ç–æ—Ä—Ç—Ç—ã“£ –≥–µ–æ–º–µ—Ç—Ä–∏—è–ª—ã“õ —Ü–µ–Ω—Ç—Ä—ñ–Ω–µ–Ω ”©—Ç–µ–¥—ñ.
‚Äî –®–æ–∫–æ–ª–∞–¥ —Ç–∞ —Ç–µ“£ –±”©–ª—ñ–Ω—É—ñ “Ø—à—ñ–Ω —Å–æ–ª –∫–µ—Å—É —Å—ã–∑—ã“ì—ã —à–æ–∫–æ–ª–∞–¥ –æ—Ä–Ω–∞–ª–∞—Å—É—ã–Ω—ã“£ —Å–∏–º–º–µ—Ç—Ä–∏—è—Å—ã–Ω–∞/–æ—Ä—Ç–∞—Å—ã–Ω–∞ —Å”ô–π–∫–µ—Å –∫–µ–ª—É—ñ –∫–µ—Ä–µ–∫.
–ï–≥–µ—Ä —à–æ–∫–æ–ª–∞–¥ –æ—Ä—Ç–∞–ª—ã“õ“õ–∞ —Å–∏–º–º–µ—Ç—Ä–∏—è–ª—ã “õ–æ–π—ã–ª—Å–∞ (–Ω–µ–º–µ—Å–µ –∞—É–¥–∞–Ω —Ü–µ–Ω—Ç—Ä—ñ —Ç–æ—Ä—Ç —Ü–µ–Ω—Ç—Ä—ñ–º–µ–Ω —Å”ô–π–∫–µ—Å –∫–µ–ª—Å–µ) ‚Äî –ò”ò, –±—ñ—Ä –∫–µ—Å—É–º–µ–Ω –µ–∫—ñ—Å—ñ–Ω –¥–µ —Ç–µ“£ –±”©–ª—É–≥–µ –±–æ–ª–∞–¥—ã.
–ï–≥–µ—Ä —à–æ–∫–æ–ª–∞–¥ –∞—Å–∏–º–º–µ—Ç—Ä–∏—è–ª—ã (–æ—Ä—Ç–∞–ª—ã“õ—Ç–∞–Ω —ã“ì—ã—Å“õ–∞–Ω) –±–æ–ª—Å–∞ ‚Äî –∂–∞–ª–ø—ã –∂–∞“ì–¥–∞–π–¥–∞ –ñ–û“ö, –±—ñ—Ä –∫–µ—Å—É–º–µ–Ω –µ–∫—ñ —à–∞—Ä—Ç—Ç—ã “õ–∞—Ç–∞—Ä –æ—Ä—ã–Ω–¥–∞—É –º“Ø–º–∫—ñ–Ω –µ–º–µ—Å.`
    },
    {
      id:12,
      title:"–ï—Å–µ–ø 12",
      statement:`–°–∞–±–∞“õ –∞–ª–ª–µ—è—Å—ã–Ω—ã“£ –µ–∫—ñ —Ç“Ø–∑—É –∂–æ–ª—ã–Ω—ã“£ –±–æ–π—ã–Ω–∞ 5 –µ–º–µ–Ω –∞“ì–∞—à—ã –æ—Ç—ã—Ä“ì—ã–∑—ã–ª“ì–∞–Ω, –∞–ª –µ–∫—ñ–Ω—à—ñ –∂–æ–ª–¥—ã“£ –±–æ–π—ã–Ω–∞ 3 –∞“ì–∞—à.
–ê–ª—Ç—ã–Ω—à—ã –∞“ì–∞—à—Ç—ã —Ç–∞“ì—ã –¥–∞ –µ–∫—ñ –∂–æ–ª –∂“Ø—Ä–≥—ñ–∑—É–≥–µ –±–æ–ª–∞—Ç—ã–Ω–¥–∞–π –µ—Ç—ñ–ø “õ–∞–ª–∞–π –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É –∫–µ—Ä–µ–∫?
(–ñ–∞—É–∞–±—ã“£—ã–∑–¥—ã —Å—ã–∑–±–∞ –∞—Ä“õ—ã–ª—ã –Ω–µ–≥—ñ–∑–¥–µ“£—ñ–∑.)`,
      diagram: baseSVG(`
        <text class="t" x="0" y="0">–õ–æ–≥–∏–∫–∞–ª—ã“õ-–≥–µ–æ–º–µ—Ç—Ä–∏—è–ª—ã“õ: —Ç“Ø–∑—É–ª–µ—Ä –∞—Ä“õ—ã–ª—ã –∫”©–ø –Ω“Ø–∫—Ç–µ</text>
        <line class="l" x1="90" y1="200" x2="430" y2="70"/>
        <line class="l" x1="90" y1="70" x2="430" y2="200"/>
        <circle class="p" cx="140" cy="182" r="5"/><circle class="p" cx="190" cy="162" r="5"/><circle class="p" cx="240" cy="142" r="5"/><circle class="p" cx="290" cy="122" r="5"/><circle class="p" cx="340" cy="102" r="5"/>
        <circle class="p" cx="160" cy="92" r="5"/><circle class="p" cx="240" cy="122" r="5"/><circle class="p" cx="320" cy="152" r="5"/>
        <circle cx="260" cy="135" r="9" fill="#f59e0b" opacity="0.35" stroke="#f59e0b" stroke-width="2"/>
        <text class="m" x="270" y="140">6-–∞“ì–∞—à</text>
      `),
      mode:"text",
      hint1:"–ï–∫—ñ –∂–æ–ª ‚Äî –µ–∫—ñ —Ç“Ø–∑—É. –ë—ñ—Ä —Ç“Ø–∑—É –±–æ–π—ã–Ω–¥–∞ –∫–µ–º—ñ–Ω–¥–µ 3 –Ω“Ø–∫—Ç–µ –±–æ–ª—Å–∞, –æ–ª —Ç“Ø–∑—É –∞–Ω—ã“õ—Ç–∞–ª–∞–¥—ã.",
      hint2:"–ú–∞“õ—Å–∞—Ç: 6-–∞“ì–∞—à—Ç—ã —Ç–∞“£–¥–∞“ì–∞–Ω–¥–∞ –µ–∫—ñ –∂–∞“£–∞ —Ç“Ø–∑—É ¬´–º“Ø–º–∫—ñ–Ω–¥—ñ–≥—ñ–Ω—à–µ –∫”©–ø –∞“ì–∞—à—Ç—ã¬ª –±—ñ—Ä —Ç“Ø–∑—É–¥—ñ“£ –±–æ–π—ã–Ω–∞ –∂–∏–Ω–∞—Å—ã–Ω (–∫–æ–ª–ª–∏–Ω–µ–∞—Ä–ª—ã“õ).",
      solution:`“Æ–ª–≥—ñ –∂–∞—É–∞–ø (–∏–¥–µ—è):
‚Äî 6-–∞“ì–∞—à—Ç—ã –±“±—Ä—ã–Ω“ì—ã –∞“ì–∞—à—Ç–∞—Ä–º–µ–Ω ¬´–±—ñ—Ä —Ç“Ø–∑—É–¥—ñ“£ –±–æ–π—ã–Ω–∞ —Ç“Ø—Å—É¬ª —à–∞—Ä—Ç—ã–Ω –±–µ—Ä–µ—Ç—ñ–Ω–¥–µ–π –æ—Ä–Ω–∞–ª–∞—Å—Ç—ã—Ä—É –∫–µ—Ä–µ–∫.
‚Äî –ü—Ä–∞–∫—Ç–∏–∫–∞–ª—ã“õ ”ô–¥—ñ—Å: 1-–∂–æ–ª–¥–∞“ì—ã 2 –∞“ì–∞—à—Ç—ã –∂”ô–Ω–µ 2-–∂–æ–ª–¥–∞“ì—ã 2 –∞“ì–∞—à—Ç—ã –∞–ª—ã–ø,
–æ–ª–∞—Ä –∞—Ä“õ—ã–ª—ã ”©—Ç–µ—Ç—ñ–Ω –µ–∫—ñ —Ç“Ø–∑—É–¥—ñ“£ “õ–∏—ã–ª—ã—Å—É –Ω“Ø–∫—Ç–µ—Å—ñ–Ω –±–µ–ª–≥—ñ–ª–µ—É.
‚Äî –°–æ–ª “õ–∏—ã–ª—ã—Å—É –Ω“Ø–∫—Ç–µ—Å—ñ–Ω–µ 6-–∞“ì–∞—à—Ç—ã –æ—Ç—ã—Ä“ì—ã–∑—Å–∞, –µ–∫—ñ —Ç“Ø–∑—É–¥—ñ –¥–µ (–µ–∫—ñ –∂–æ–ª–¥—ã) “õ–∞–π—Ç–∞ –∂“Ø—Ä–≥—ñ–∑—É–≥–µ –±–æ–ª–∞–¥—ã,
”©–π—Ç–∫–µ–Ω—ñ ”ô—Ä —Ç“Ø–∑—É –∫–µ–º—ñ–Ω–¥–µ 2‚Äì3 –∞“ì–∞—à –∞—Ä“õ—ã–ª—ã ¬´–±–µ–∫—ñ—Ç—ñ–ª–µ–¥—ñ¬ª.
–ë“±–ª –µ—Å–µ–ø—Ç—ñ“£ –±—ñ—Ä–Ω–µ—à–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–ª—ã“õ —à–µ—à—ñ–º—ñ –±–∞—Ä: –Ω–µ–≥—ñ–∑–≥—ñ –ø—Ä–∏–Ω—Ü–∏–ø ‚Äî –∫–æ–ª–ª–∏–Ω–µ–∞—Ä–ª—ã“õ—Ç—ã “õ“±—Ä—É.`
    }
  ];

  const state = {
    current: 0,
    per: TASKS.map(()=>({
      startedAt:null,
      elapsed:0,
      actions:0,
      wrong:0,
      correct:false,
      hints:0,
      usedHint1:false,
      usedHint2:false,
      showedKey:false,
      lastCheck:null,
      // user inputs
      inputValue:"",
      choiceIndex:null,
      textValue:""
    }))
  };

  let timer=null;

  function startTimer(){
    stopTimer();
    timer=setInterval(()=>{
      const s=state.per[state.current];
      if(!s.startedAt) s.startedAt=Date.now();
      s.elapsed = Math.floor((Date.now()-s.startedAt)/1000);
      $("timerPill").textContent = `‚è± ${fmtTime(s.elapsed)}`;
      renderKPIs();
      renderMeta();
    },250);
  }
  function stopTimer(){ if(timer) clearInterval(timer); timer=null; }

  function renderTaskList(){
    const el=$("taskList");
    el.innerHTML="";
    TASKS.forEach((t,i)=>{
      const s=state.per[i];
      const div=document.createElement("div");
      div.className="item"+(i===state.current?" active":"");
      const badge = s.correct ? `<span class="pill ok">‚úî</span>` : (s.lastCheck===false ? `<span class="pill bad">‚úñ</span>` : `<span class="pill">‚Äî</span>`);
      div.innerHTML = `
        <div class="row" style="justify-content:space-between">
          <b>${t.id})</b>
          ${badge}
        </div>
        <div class="small" style="margin-top:6px">${t.title}</div>
        <div class="small">“ö–∞—Ç–µ: ${s.wrong} ¬∑ –ö”©–º–µ–∫: ${s.hints} ¬∑ –£–∞“õ.: ${fmtTime(s.elapsed||0)}</div>
      `;
      div.onclick=()=>{ state.current=i; renderAll(); };
      el.appendChild(div);
    });
  }

  function renderAnswerArea(){
    const t=TASKS[state.current];
    const s=state.per[state.current];
    const area=$("answerArea");
    area.innerHTML="";

    if(t.mode==="input"){
      const wrap=document.createElement("div");
      wrap.innerHTML = `
        <b>–ñ–∞—É–∞–ø –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑</b>
        <div class="small">–ú—ã—Å–∞–ª—ã: 21 –Ω–µ–º–µ—Å–µ 30¬∞</div>
        <input id="ansInput" placeholder="–ñ–∞—É–∞–ø..." value="${escapeHtml(s.inputValue||"")}"/>
      `;
      area.appendChild(wrap);
      $("ansInput").addEventListener("input",(e)=>{
        s.inputValue=e.target.value;
      });
    }

    if(t.mode==="mcq"){
      const wrap=document.createElement("div");
      wrap.innerHTML = `<b>–î“±—Ä—ã—Å —Ç“±–∂—ã—Ä—ã–º–¥—ã —Ç–∞“£–¥–∞“£—ã–∑</b><div class="small">–ë—ñ—Ä –∂–∞—É–∞–ø.</div>`;
      const box=document.createElement("div");
      box.className="choices";
      t.choices.forEach((c,idx)=>{
        const div=document.createElement("label");
        div.className="choice";
        div.innerHTML = `
          <input type="radio" name="mcq" ${s.choiceIndex===idx?"checked":""}/>
          <div><div class="mono">${escapeHtml(c)}</div></div>
        `;
        div.onclick=()=>{
          s.choiceIndex=idx;
          s.actions++;
          toast("–¢–∞“£–¥–∞—É —Å–∞“õ—Ç–∞–ª–¥—ã");
          renderMeta(); renderTaskList();
        };
        box.appendChild(div);
      });
      wrap.appendChild(box);
      area.appendChild(wrap);
    }

    if(t.mode==="text"){
      const wrap=document.createElement("div");
      wrap.innerHTML = `
        <b>–ñ–∞—É–∞–ø—Ç—ã “õ—ã—Å“õ–∞—à–∞ –∂–∞–∑—ã“£—ã–∑ (”©–∑ –æ–π—ã“£—ã–∑)</b>
        <div class="small">–ë“±–ª –µ—Å–µ–ø—Ç–µ –∞–≤—Ç–æ-—Ç–µ–∫—Å–µ—Ä—É –∂–æ“õ. –¢”©–º–µ–Ω–¥–µ ‚Äú–ñ–∞—É–∞–ø –∫—ñ–ª—Ç—ñ‚Äù –∞—Ä“õ—ã–ª—ã “Ø–ª–≥—ñ —à–µ—à—ñ–º –±–µ—Ä—ñ–ª–µ–¥—ñ.</div>
        <textarea id="ansText" placeholder="–ñ–∞—É–∞–ø...">${escapeHtml(s.textValue||"")}</textarea>
      `;
      area.appendChild(wrap);
      $("ansText").addEventListener("input",(e)=>{
        s.textValue=e.target.value;
      });
    }
  }

  function renderMeta(){
    const s=state.per[state.current];
    $("metaPill").textContent = `”ò—Ä–µ–∫–µ—Ç: ${s.actions} ¬∑ “ö–∞—Ç–µ: ${s.wrong} ¬∑ –ö”©–º–µ–∫: ${s.hints} ¬∑ –£–∞“õ—ã—Ç: ${fmtTime(s.elapsed||0)}`;
    if(s.lastCheck===true) setStatus("ok","‚úî –î“±—Ä—ã—Å");
    else if(s.lastCheck===false) setStatus("bad","‚úñ “ö–∞—Ç–µ");
    else setStatus("idle","”ò–ª—ñ —Ç–µ–∫—Å–µ—Ä—ñ–ª–º–µ–¥—ñ");
  }

  function renderKPIs(){
    let done=0, wrong=0, hints=0, total=0;
    state.per.forEach(x=>{
      done += x.correct ? 1 : 0;
      wrong += x.wrong;
      hints += x.hints;
      total += x.elapsed||0;
    });
    $("kpiDone").textContent=done;
    $("kpiWrong").textContent=wrong;
    $("kpiHints").textContent=hints;
    $("kpiTime").textContent=fmtTime(total);
  }

  function renderAll(){
    const t=TASKS[state.current];
    const s=state.per[state.current];

    $("title").textContent = `${t.id}-–µ—Å–µ–ø.`;
    $("statement").textContent = t.statement;
    $("diagram").innerHTML = t.diagram;
    $("note").innerHTML = `–ï—Å–∫–µ—Ä—Ç—É: <b>–ö”©–º–µ–∫</b> ‚Äî —à–µ—à—ñ–º–¥—ñ ‚Äú–∞—à–ø–∞–π‚Äù, –±–∞“ì—ã—Ç –±–µ—Ä–µ–¥—ñ. <b>–ñ–∞—É–∞–ø –∫—ñ–ª—Ç—ñ</b> ‚Äî —Ç–æ–ª—ã“õ —à–µ—à—ñ–º.`;

    $("hintBox1").style.display = s.usedHint1 ? "block":"none";
    $("hintBox2").style.display = s.usedHint2 ? "block":"none";
    $("keyBox").style.display  = s.showedKey ? "block":"none";

    $("hint1Text").textContent = t.hint1;
    $("hint2Text").textContent = t.hint2;
    $("solutionText").textContent = t.solution;

    renderAnswerArea();
    renderMeta();
    renderKPIs();
    renderTaskList();

    startTimer();
  }

  function norm(v){
    return (v||"").toString().trim().toLowerCase().replaceAll(" ", "");
  }

  function check(){
    const t=TASKS[state.current];
    const s=state.per[state.current];
    s.actions++;

    let ok=null;

    if(t.mode==="input"){
      const v=norm(s.inputValue);
      ok = t.accept.map(norm).includes(v);
    } else if(t.mode==="mcq"){
      ok = (s.choiceIndex===t.correctIndex);
    } else {
      // text mode: no auto-check
      ok = null;
    }

    if(ok===true){
      s.correct=true;
      s.lastCheck=true;
      toast("–î“±—Ä—ã—Å ‚úÖ");
    } else if(ok===false){
      s.wrong++;
      s.lastCheck=false;
      toast("“ö–∞—Ç–µ ‚ùå");
    } else {
      toast("–ë“±–ª –µ—Å–µ–ø –∞–≤—Ç–æ-—Ç–µ–∫—Å–µ—Ä–º–µ–π–¥—ñ. –ö—ñ–ª—Ç–ø–µ–Ω —Å–∞–ª—ã—Å—Ç—ã—Ä—ã“£—ã–∑.");
    }

    renderMeta();
    renderKPIs();
    renderTaskList();
  }

  function clearCurrent(){
    const t=TASKS[state.current];
    const s=state.per[state.current];
    s.actions++;
    s.lastCheck=null;
    if(t.mode==="input") s.inputValue="";
    if(t.mode==="mcq") s.choiceIndex=null;
    if(t.mode==="text") s.textValue="";
    toast("–¢–∞–∑–∞—Ä—Ç—ã–ª–¥—ã");
    renderAll();
  }

  function hint(which){
    const t=TASKS[state.current];
    const s=state.per[state.current];
    s.actions++;
    s.hints++;

    if(which===1){
      s.usedHint1=true;
      $("hintBox1").style.display="block";
      $("hintBox1").open=true;
      toast("–ö”©–º–µ–∫ 1 –∞—à—ã–ª–¥—ã");
    } else {
      s.usedHint2=true;
      $("hintBox2").style.display="block";
      $("hintBox2").open=true;
      toast("–ö”©–º–µ–∫ 2 –∞—à—ã–ª–¥—ã");
    }
    renderMeta(); renderKPIs(); renderTaskList();
  }

  function key(){
    const s=state.per[state.current];
    s.actions++;
    s.showedKey=true;
    $("keyBox").style.display="block";
    $("keyBox").open=true;
    toast("–ñ–∞—É–∞–ø –∫—ñ–ª—Ç—ñ –∞—à—ã–ª–¥—ã");
    renderMeta(); renderKPIs(); renderTaskList();
  }

  function buildReport(){
    const name=$("studentName").value.trim()||"–ê—Ç—ã –∂–æ“õ";
    const cls=$("studentClass").value.trim()||"‚Äî";
    let done=0, wrong=0, hints=0, total=0;

    const lines=[];
    lines.push("GEOMETRY LAB PRO ‚Äî –ï—Å–µ–ø –±–µ—Ä—É (12 –µ—Å–µ–ø)");
    lines.push(`–û“õ—É—à—ã: ${name} | –°—ã–Ω—ã–ø: ${cls}`);
    lines.push("");

    state.per.forEach((s,i)=>{
      const t=TASKS[i];
      done += s.correct?1:0;
      wrong += s.wrong;
      hints += s.hints;
      total += s.elapsed||0;

      const status = s.correct ? "‚úî" : (s.lastCheck===false ? "‚úñ" : "‚Äî");
      lines.push(`${t.id}) ${status} | ”ô—Ä–µ–∫–µ—Ç=${s.actions} | “õ–∞—Ç–µ=${s.wrong} | –∫”©–º–µ–∫=${s.hints} | –∫—ñ–ª—Ç=${s.showedKey?"–∏”ô":"–∂–æ“õ"} | —É–∞“õ—ã—Ç=${fmtTime(s.elapsed||0)}`);
    });

    lines.push("");
    lines.push(`“ö–æ—Ä—ã—Ç—ã–Ω–¥—ã: –¥“±—Ä—ã—Å=${done}/12 | “õ–∞—Ç–µ=${wrong} | –∫”©–º–µ–∫=${hints} | –∂–∞–ª–ø—ã —É–∞“õ—ã—Ç=${fmtTime(total)}`);
    lines.push("–ï—Å–∫–µ—Ä—Ç—É: 11‚Äì12 –µ—Å–µ–ø—Ç–µ—Ä ‚Äî –ª–æ–≥–∏–∫–∞–ª—ã“õ, –∞–≤—Ç–æ-—Ç–µ–∫—Å–µ—Ä—É –∂–æ“õ (“Ø–ª–≥—ñ –∂–∞—É–∞–ø–ø–µ–Ω —Å–∞–ª—ã—Å—Ç—ã—Ä—É).");

    return lines.join("\n");
  }

  async function copyReport(){
    const rep=buildReport();
    try{
      await navigator.clipboard.writeText(rep);
      toast("–ï—Å–µ–ø –±–µ—Ä—É –∫”©—à—ñ—Ä—ñ–ª–¥—ñ");
    }catch(e){
      const ta=document.createElement("textarea");
      ta.value=rep; document.body.appendChild(ta);
      ta.select(); document.execCommand("copy");
      document.body.removeChild(ta);
      toast("–ï—Å–µ–ø –±–µ—Ä—É –∫”©—à—ñ—Ä—ñ–ª–¥—ñ");
    }
  }

  function resetAll(){
    if(!confirm("–ë–∞—Ä–ª—ã“ì—ã–Ω —Ç–∞–∑–∞—Ä—Ç–∞—Å—ã“£ –±–∞?")) return;
    state.per = TASKS.map(()=>({
      startedAt:null, elapsed:0,
      actions:0, wrong:0, correct:false, hints:0,
      usedHint1:false, usedHint2:false, showedKey:false,
      lastCheck:null, inputValue:"", choiceIndex:null, textValue:""
    }));
    state.current=0;
    toast("–ë–∞—Ä–ª—ã“ì—ã —Ç–∞–∑–∞—Ä—Ç—ã–ª–¥—ã");
    renderAll();
  }

  function escapeHtml(s){
    return (s||"").toString()
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // wiring
  $("checkBtn").addEventListener("click", check);
  $("clearBtn").addEventListener("click", clearCurrent);
  $("hint1Btn").addEventListener("click", ()=>hint(1));
  $("hint2Btn").addEventListener("click", ()=>hint(2));
  $("keyBtn").addEventListener("click", key);

  $("finishBtn").addEventListener("click", ()=>{
    stopTimer();
    alert(buildReport());
    startTimer();
  });
  $("copyBtn").addEventListener("click", copyReport);
  $("resetBtn").addEventListener("click", resetAll);

  // init
  renderAll();
</script>
</body>
</html>
