<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>–ö–µ—Ä—ñ –±–∞–π–ª–∞–Ω—ã—Å</title>
<style>
    body{
        font-family: Arial;
        background:#eef2ff;
        margin:0;
    }
    .top-bar{
        background:#1e3a8a;
        padding:14px 20px;
        color:white;
        font-size:20px;
    }
    .container{
        padding:20px;
    }
    .cards{
        display:flex;
        gap:20px;
    }
    .card{
        flex:1;
        padding:15px;
        border-radius:14px;
        min-height:120px;
        background:white;
    }
    .green{border-left:6px solid #22c55e;}
    .yellow{border-left:6px solid #facc15;}
    .red{border-left:6px solid #ef4444;}

    .title{
        font-weight:bold;
        margin-bottom:8px;
    }

    .percent{
        float:right;
        font-weight:bold;
        color:#555;
    }

    /* –û“õ—É—à—ã–ª–∞—Ä */
    .student-boxes{
        display:flex;
        gap:20px;
        flex-wrap:wrap;
    }
    .student{
        background:white;
        border-radius:12px;
        padding:12px;
        box-shadow:0 2px 5px rgba(0,0,0,0.1);
        width:170px;
    }
    .lights{
        display:flex;
        justify-content:center;
        gap:12px;
        margin-top:10px;
    }
    .light{
        width:26px;
        height:26px;
        border-radius:50%;
        cursor:pointer;
        border:3px solid transparent;
    }
    .green-light{background:#22c55e;}
    .yellow-light{background:#facc15;}
    .red-light{background:#ef4444;}

    .active{border-color:#1e3a8a;}

    /* –î–∏–∞–≥—Ä–∞–º–º–∞ */
    .chart-box{
        background:white;
        padding:20px;
        border-radius:14px;
        margin-top:30px;
        box-shadow:0 2px 5px rgba(0,0,0,0.1);
        max-width:650px;
    }
    .bar{
        background:#e5e7eb;
        height:20px;
        border-radius:10px;
        margin:10px 0;
    }
    .fill{
        height:20px;
        border-radius:10px;
    }
    .green-fill{background:#22c55e;}
    .yellow-fill{background:#facc15;}
    .red-fill{background:#ef4444;}

    textarea{
        width:100%;
        height:100px;
        font-size:16px;
        padding:10px;
        border-radius:10px;
        border:1px solid #cbd5e1;
    }
    .btn{
        margin-top:10px;
        padding:10px 14px;
        background:#1e3a8a;
        color:white;
        border:none;
        border-radius:10px;
        cursor:pointer;
    }
    .btn:hover{background:#162c6f;}

</style>
</head>
<body>

<div class="top-bar">üìä –ö–µ—Ä—ñ –±–∞–π–ª–∞–Ω—ã—Å</div>

<div class="container">

    <!-- –û“õ—É—à—ã–ª–∞—Ä–¥—ã –µ–Ω–≥—ñ–∑—É -->
    <h3>üìò –û“õ—É—à—ã–ª–∞—Ä —Ç—ñ–∑—ñ–º—ñ–Ω –µ–Ω–≥—ñ–∑—É</h3>
    <textarea id="studentInput" placeholder="–ú—ã—Å–∞–ª—ã:
–ê–π–¥–∞–Ω–∞
–ú“±—Ä–∞—Ç
–ñ–∞–Ω–µ–ª—å
–°–∞–º–∞—Ç
..."></textarea>
    <button class="btn" onclick="loadStudents()">–û“õ—É—à—ã–ª–∞—Ä–¥—ã –µ–Ω–≥—ñ–∑—É</button>

    <!-- “Æ—à –Ω–µ–≥—ñ–∑–≥—ñ –∫–∞—Ä—Ç–æ—á–∫–∞ -->
    <div class="cards" style="margin-top:30px;">
        <div class="card green">
            <div class="title">üü¢ –¢“Æ–°–Ü–ù–î–Ü–ú <span id="pGreen" class="percent">0%</span></div>
            <div id="greenList">‚Äî</div>
        </div>

        <div class="card yellow">
            <div class="title">üü° –ñ–ê–†–¢–´–õ–ê–ô –¢“Æ–°–Ü–ù–î–Ü–ú <span id="pYellow" class="percent">0%</span></div>
            <div id="yellowList">‚Äî</div>
        </div>

        <div class="card red">
            <div class="title">üî¥ –¢“Æ–°–Ü–ù–ë–ï–î–Ü–ú <span id="pRed" class="percent">0%</span></div>
            <div id="redList">‚Äî</div>
        </div>
    </div>

    <!-- –û“õ—É—à—ã–ª–∞—Ä -->
    <h3 style="margin-top:30px;">üë• –û“õ—É—à—ã–ª–∞—Ä</h3>
    <div class="student-boxes" id="students"></div>

    <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ -->
    <div class="chart-box">
        <h3>üìà –ö–µ—Ä—ñ –±–∞–π–ª–∞–Ω—ã—Å –¥–∏–∞–≥—Ä–∞–º–º–∞—Å—ã</h3>

        <div>üü¢ –¢“Ø—Å—ñ–Ω–¥—ñ–º</div>
        <div class="bar"><div id="barGreen" class="fill green-fill" style="width:0%"></div></div>

        <div>üü° –ñ–∞—Ä—Ç—ã–ª–∞–π —Ç“Ø—Å—ñ–Ω–¥—ñ–º</div>
        <div class="bar"><div id="barYellow" class="fill yellow-fill" style="width:0%"></div></div>

        <div>üî¥ –¢“Ø—Å—ñ–Ω–±–µ–¥—ñ–º</div>
        <div class="bar"><div id="barRed" class="fill red-fill" style="width:0%"></div></div>
    </div>

</div>

<!-- –ê–≤—Ç–æ—Ä–ª—ã“õ –±–ª–æ–∫ -->
<div style="
    margin-top:40px;
    text-align:center;
    font-size:18px;
    padding:16px 0;
    color:#4b5563;
    border-top:4px solid #c084fc;
    background: linear-gradient(to right, #fff, #faf5ff, #fff);
">
    üåø <b>AI-Pedagogy Tools</b> by 
    <span style="color:#7c3aed; font-weight:bold;">Nazerke Kairatkyzy</span> üåø
</div>

<script>

let studentNames = [];
let results = {}; // {name: "green" | "yellow" | "red"}

function loadStudents(){
    let raw = document.getElementById("studentInput").value.trim();
    if(!raw){
        alert("–û“õ—É—à—ã–ª–∞—Ä —Ç—ñ–∑—ñ–º—ñ–Ω –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑!");
        return;
    }

    studentNames = raw.split("\n").map(x=>x.trim()).filter(x=>x);
    results = {};

    renderStudents();
    updateUI();
}

function renderStudents(){
    let box = document.getElementById("students");
    box.innerHTML = "";

    studentNames.forEach(name=>{
        let div = document.createElement("div");
        div.className="student";
        div.innerHTML = `
            <b>${name}</b>
            <div class="lights">
                <div class="light green-light" onclick="vote('${name}','green', this)"></div>
                <div class="light yellow-light" onclick="vote('${name}','yellow', this)"></div>
                <div class="light red-light" onclick="vote('${name}','red', this)"></div>
            </div>
        `;
        box.appendChild(div);
    });
}

function vote(name,color, el){
    results[name] = color;

    // –∫–Ω–æ–ø–∫–∞ –≤–∏–∑—É–∞–ª–¥—ã –±–µ–ª–≥—ñ–ª–µ–Ω–µ–¥—ñ
    let parent = el.parentElement;
    [...parent.children].forEach(btn => btn.classList.remove("active"));
    el.classList.add("active");

    updateUI();
}

function updateUI(){
    let g = Object.values(results).filter(x=>x==="green").length;
    let y = Object.values(results).filter(x=>x==="yellow").length;
    let r = Object.values(results).filter(x=>x==="red").length;

    let total = studentNames.length || 1;

    document.getElementById("pGreen").innerText = Math.round(g/total*100)+"%";
    document.getElementById("pYellow").innerText = Math.round(y/total*100)+"%";
    document.getElementById("pRed").innerText = Math.round(r/total*100)+"%";

    document.getElementById("greenList").innerText = g>0 ? g + " –æ“õ—É—à—ã" : "‚Äî";
    document.getElementById("yellowList").innerText = y>0 ? y + " –æ“õ—É—à—ã" : "‚Äî";
    document.getElementById("redList").innerText = r>0 ? r + " –æ“õ—É—à—ã" : "‚Äî";

    document.getElementById("barGreen").style.width = (g/total*100)+"%";
    document.getElementById("barYellow").style.width = (y/total*100)+"%";
    document.getElementById("barRed").style.width = (r/total*100)+"%";
}

</script>

</body>
</html>
