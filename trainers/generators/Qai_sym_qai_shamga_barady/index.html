<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>Logic Circuit PRO – Қай сым қай шамға барады?</title>
<style>
    body{
        margin:0;
        padding:20px;
        font-family:system-ui,Arial;
        background:#eef2ff;
        display:flex;
        justify-content:center;
    }
    .container{
        max-width:1000px;
        width:100%;
        background:white;
        padding:26px 30px;
        border-radius:18px;
        box-shadow:0 10px 25px rgba(0,0,0,0.18);
    }
    h1{
        text-align:center;
        font-size:26px;
        color:#1e40af;
        margin-bottom:16px;
    }
    textarea{
        width:100%;
        height:120px;
        border-radius:12px;
        border:1px solid #cbd5ff;
        padding:10px;
        font-size:14px;
        margin-bottom:10px;
        resize:vertical;
    }
    button{
        border:none;
        border-radius:999px;
        padding:10px 22px;
        background:linear-gradient(135deg,#6366f1,#4f46e5);
        color:white;
        cursor:pointer;
        margin-bottom:14px;
        font-size:15px;
        box-shadow:0 4px 12px rgba(79,70,229,0.35);
    }

    .game-area{
        display:flex;
        justify-content:center;
        gap:20px;
        margin-top:20px;
    }
    .side{
        display:flex;
        flex-direction:column;
        gap:14px;
        margin-top:30px;
    }
    .btn, .lamp{
        width:70px;
        height:40px;
        background:#eef2ff;
        border:2px solid #cbd5ff;
        border-radius:10px;
        display:flex;
        align-items:center;
        justify-content:center;
        font-size:20px;
        font-weight:600;
        cursor:pointer;
        transition:0.15s;
    }
    .btn:hover, .lamp:hover{
        transform:scale(1.05);
        border-color:#6366f1;
    }
    .correct{
        background:#22c55e !important;
        color:white !important;
        border-color:#22c55e !important;
    }
    .wrong{
        background:#ef4444 !important;
        color:white !important;
        border-color:#ef4444 !important;
    }

    .status{
        text-align:center;
        margin-top:16px;
        font-size:20px;
        color:#1e40af;
        font-weight:600;
    }

    canvas{
        background:white;
        border:1px solid #cbd5ff;
        border-radius:14px;
    }

    .author{
        margin-top:26px;
        text-align:center;
        color:#777;
        font-size:14px;
    }
</style>
</head>
<body>

<div class="container">

<h1>Logic Circuit PRO – Қай сым қай шамға барады?</h1>

<label>Батырмалар тізімі:</label>
<textarea id="leftArea">A
B
C
D</textarea>

<label>Шамдар тізімі:</label>
<textarea id="rightArea">1
2
3
4</textarea>

<label>Дұрыс сәйкестіктер (формат: A - 3):</label>
<textarea id="mapArea">A - 3
B - 1
C - 4
D - 2</textarea>

<button onclick="startGame()">Ойынды бастау</button>

<div id="gameBox"></div>

<div class="author">
    © Pedagogy Tools • Author: <b>Nazerke Kairatkyzy</b>
</div>

</div>

<script>
let leftList=[];
let rightList=[];
let mapping={};
let selectedLeft=null;

function startGame(){
    leftList=document.getElementById("leftArea").value.trim().split(/\r?\n/);
    rightList=document.getElementById("rightArea").value.trim().split(/\r?\n/);

    mapping={};
    document.getElementById("mapArea").value.trim().split(/\r?\n/).forEach(line=>{
        const p=line.split(/[-–—]/);
        if(p.length>=2){
            const L=p[0].trim();
            const R=p[1].trim();
            mapping[L]=R;
        }
    });

    renderGame();
}

function renderGame(){
    const box=document.getElementById("gameBox");
    box.innerHTML=`
        <div class="game-area">
            <div class="side" id="leftSide">
                ${leftList.map(L=>{
                    return `<div class="btn" onclick="selectLeft('${L}', this)">${L}</div>`;
                }).join("")}
            </div>

            <canvas id="lineCanvas" width="450" height="350"></canvas>

            <div class="side" id="rightSide">
                ${rightList.map(R=>{
                    return `<div class="lamp" onclick="selectRight('${R}', this)">${R}</div>`;
                }).join("")}
            </div>
        </div>

        <div class="status" id="statusBox">Жұп таңдаңыз</div>
    `;

    drawLines();
}

function drawLines(){
    const c=document.getElementById("lineCanvas");
    const ctx=c.getContext("2d");

    ctx.clearRect(0,0,c.width,c.height);

    // Әр сызықты рандом бағыттап жүргіземіз
    leftList.forEach((L,i)=>{
        const R=mapping[L];
        const rightIndex=rightList.indexOf(R);

        const x1=0, y1=50 + i*70;
        const x2=c.width, y2=50 + rightIndex*70;

        ctx.beginPath();
        ctx.moveTo(x1,y1);

        // Арасына 1–2 рет бұрылыс жасаймыз
        const midX=x1 + Math.random()*200 + 100;
        const midY=y1 + (Math.random()*200 - 100);
        ctx.lineTo(midX, midY);
        ctx.lineTo(x2,y2);

        ctx.lineWidth=3;
        ctx.strokeStyle="#6b7280";
        ctx.stroke();
    });
}

function selectLeft(L, el){
    selectedLeft=L;

    document.querySelectorAll(".btn").forEach(b=>b.classList.remove("selected"));
    el.style.borderColor="#4f46e5";
    el.style.background="#e0e7ff";

    document.getElementById("statusBox").textContent=L + " → ?";
}

function selectRight(R, el){
    if(!selectedLeft){
        document.getElementById("statusBox").textContent="Алдымен батырманы таңдаңыз!";
        return;
    }

    const correctR = mapping[selectedLeft];

    if(R === correctR){
        el.classList.add("correct");
        document.getElementById("statusBox").textContent="Дұрыс! ✔";
    } else {
        el.classList.add("wrong");
        document.getElementById("statusBox").textContent="Қате! ✘";
    }

    selectedLeft=null;
}
</script>

</body>
</html>
