<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>Missing Letter – Жоғалған әріпті тап</title>
<style>
    body{
        margin:0;
        padding:20px;
        font-family:system-ui,Arial;
        background:#eef2ff;
        display:flex;
        justify-content:center;
    }
    .container{
        max-width:700px;
        width:100%;
        background:white;
        border-radius:16px;
        padding:20px 24px 32px;
        box-shadow:0 10px 25px rgba(0,0,0,0.18);
        box-sizing:border-box;
    }
    h1{
        text-align:center;
        color:#1e3a8a;
        font-size:26px;
        margin:0 0 16px;
    }
    textarea{
        width:100%;
        height:140px;
        border-radius:12px;
        border:1px solid #cbd5ff;
        padding:10px;
        font-size:14px;
        resize:vertical;
        margin-bottom:8px;
        box-sizing:border-box;
    }
    button{
        border:none;
        border-radius:999px;
        padding:10px 22px;
        background:linear-gradient(135deg,#6366f1,#4f46e5);
        color:white;
        font-size:15px;
        cursor:pointer;
        margin-top:4px;
        box-shadow:0 4px 12px rgba(79,70,229,0.35);
    }
    .box{
        margin-top:22px;
        background:#f8fafc;
        padding:20px;
        border-radius:14px;
        border:1px solid #e2e8f0;
        text-align:center;
        min-height:150px;
    }
    .word{
        font-size:28px;
        font-weight:600;
        letter-spacing:2px;
        margin-bottom:18px;
        color:#111827;
    }
    .options{
        display:flex;
        justify-content:center;
        gap:12px;
        flex-wrap:wrap;
    }
    .opt-btn{
        border:none;
        border-radius:999px;
        padding:10px 18px;
        min-width:50px;
        font-size:20px;
        cursor:pointer;
        background:#eef2ff;
        transition:0.15s;
        border:1px solid transparent;
    }
    .opt-btn:hover{
        transform:scale(1.05);
        border-color:#c7d2fe;
    }
    .opt-btn.correct{
        background:#22c55e;
        color:#fff;
        border:none;
    }
    .opt-btn.wrong{
        background:#ef4444;
        color:#fff;
        border:none;
    }
    .info{
        margin-top:12px;
        font-size:15px;
        color:#4b5563;
        min-height:20px;
    }
    .finish{
        text-align:center;
        font-size:22px;
        margin-top:10px;
        color:#1e3a8a;
        font-weight:600;
    }
    .author{
        margin-top:26px;
        text-align:center;
        font-size:14px;
        color:#777;
    }
</style>
</head>
<body>
<div class="container">

    <h1>Missing Letter – Жоғалған әріпті тап</h1>

    <label>Сөздер (әр жолға бір сөз):</label>
    <textarea id="wordsArea">АЛГОРИТМ
МОНITOR
КОД
КЛАВИАТУРА
МОДЕЛЬ
РОБОТ
ФИЗИКА</textarea>

    <div style="font-size:13px;color:#475569;margin-bottom:4px;">
        Сөздерді толық жазыңыз (жоғалған әріпті ойын өзі таңдайды). Қазақ әріптері: Ә, Ө, Ү, Ұ, Қ, Ғ, Ң, І.
    </div>

    <button onclick="startGame()">Ойынды бастау</button>

    <div id="gameBox" class="box"></div>

    <div class="author">
        © Pedagogy Tools • Author: <b>Nazerke Kairatkyzy</b>
    </div>

</div>

<script>
// Қазақ алфавиті (бас әріптер)
const KZ_LETTERS = "АӘБВГҒДЕЁЖЗИІЙКҚЛМНҢОӨПРСТУҰҮФХҺЦЧШЩЫЬЭЮЯ";

let words = [];
let index = 0;
let score = 0;

let currentWord = "";
let missingIndex = -1;
let correctLetter = "";

function shuffle(arr){
    for(let i=arr.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]] = [arr[j],arr[i]];
    }
    return arr;
}

function startGame(){
    const txt = document.getElementById("wordsArea").value.trim();
    words = txt.split(/\r?\n/).map(w=>w.trim().toUpperCase()).filter(w=>w.length>1);
    if(words.length===0){
        alert("Кемінде 2 әріптен тұратын бір сөз енгізіңіз.");
        return;
    }
    index = 0;
    score = 0;
    loadQuestion();
}

function loadQuestion(){
    const box = document.getElementById("gameBox");

    if(index >= words.length){
        box.innerHTML = `
            <div class="finish">
                Ойын аяқталды!<br>
                Дұрыс жауаптар: <b>${score}</b> / ${words.length}
            </div>
        `;
        return;
    }

    currentWord = words[index];

    // Жоғалған әріпті сөздің басынан да, соңынан да алуға болады, бірақ тым қысқа емес
    missingIndex = Math.floor(Math.random() * currentWord.length);
    correctLetter = currentWord[missingIndex];

    // Сөзді "_" арқылы шығару
    let displayWord = "";
    for(let i=0;i<currentWord.length;i++){
        if(i===missingIndex) displayWord += "_";
        else displayWord += currentWord[i];
    }

    // 2 жалған нұсқа таңдау
    const opts = [correctLetter];
    while(opts.length<3){
        const rand = KZ_LETTERS[Math.floor(Math.random()*KZ_LETTERS.length)];
        if(!opts.includes(rand)){
            opts.push(rand);
        }
    }
    shuffle(opts);

    box.innerHTML = `
        <div style="font-size:18px;color:#1e3a8a;margin-bottom:8px;">
            Сөздегі жоғалған әріпті тап:
        </div>
        <div class="word">${displayWord}</div>
        <div class="options" id="optsBox"></div>
        <div class="info" id="infoBox"></div>
    `;

    const optsBox = document.getElementById("optsBox");
    opts.forEach(letter=>{
        const btn = document.createElement("button");
        btn.className = "opt-btn";
        btn.textContent = letter;
        btn.onclick = () => checkAnswer(btn, letter);
        optsBox.appendChild(btn);
    });

    updateInfo();
}

function updateInfo(){
    const info = document.getElementById("infoBox");
    if(info){
        info.textContent = `Сөз: ${index+1} / ${words.length}   |   Дұрыс жауаптар: ${score}`;
    }
}

function checkAnswer(btn, letter){
    const allBtns = document.querySelectorAll(".opt-btn");
    allBtns.forEach(b => b.disabled = true);

    if(letter === correctLetter){
        btn.classList.add("correct");
        score++;
    }else{
        btn.classList.add("wrong");
        // Дұрыс нұсқаны да белгілейік
        allBtns.forEach(b=>{
            if(b.textContent === correctLetter){
                b.classList.add("correct");
            }
        });
    }

    setTimeout(()=>{
        index++;
        loadQuestion();
    },800);
}
</script>

</body>
</html>
