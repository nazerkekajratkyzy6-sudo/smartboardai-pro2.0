<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <title>–ñ“±–ø—Ç—ã —Ç–∞–ø ‚Äì “õ–∞–∑–∞“õ—à–∞ Match Up –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã</title>
    <style>
        body{
            margin:0;
            padding:20px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
            background:#eef2ff;
            display:flex;
            justify-content:center;
        }
        .container{
            max-width:1100px;
            width:100%;
            background:#ffffff;
            border-radius:18px;
            box-shadow:0 10px 25px rgba(15,23,42,0.18);
            padding:20px 22px 26px;
            display:flex;
            gap:22px;
            box-sizing:border-box;
        }
        h1{
            margin:0 0 10px;
            font-size:22px;
            text-align:center;
            color:#1e3a8a;
        }
        .left, .right{
            flex:1;
        }
        label{
            font-size:14px;
            font-weight:600;
            color:#4b5563;
        }
        textarea{
            width:100%;
            height:210px;
            margin-top:6px;
            margin-bottom:12px;
            border-radius:12px;
            border:1px solid #cbd5f5;
            padding:10px;
            resize:vertical;
            font-size:14px;
            box-sizing:border-box;
        }
        button{
            border:none;
            border-radius:999px;
            padding:8px 18px;
            font-size:14px;
            cursor:pointer;
            margin-top:8px;
            margin-right:8px;
            background:linear-gradient(135deg,#6366f1,#4f46e5);
            color:white;
            box-shadow:0 5px 15px rgba(79,70,229,0.35);
        }
        button.secondary{
            background:#e5e7eb;
            color:#111827;
            box-shadow:none;
        }
        .status{
            margin-top:8px;
            font-size:14px;
            min-height:20px;
        }
        .status.ok{color:#16a34a;}
        .status.err{color:#dc2626;}
        .game-area{
            display:flex;
            gap:16px;
            margin-top:8px;
        }
        .col{
            flex:1;
            background:#f9fafb;
            border-radius:14px;
            padding:10px;
            box-sizing:border-box;
            border:1px solid #e5e7eb;
        }
        .col-title{
            font-size:14px;
            font-weight:600;
            margin-bottom:8px;
            color:#374151;
            text-align:center;
        }
        .items{
            display:flex;
            flex-direction:column;
            gap:8px;
        }
        .item-btn{
            width:100%;
            text-align:left;
            padding:10px 12px;
            border-radius:999px;
            border:none;
            background:#eef2ff;
            color:#111827;
            font-size:14px;
            cursor:pointer;
            box-shadow:0 2px 5px rgba(148,163,184,0.4);
            transition:transform 0.05s, box-shadow 0.05s, background 0.15s;
        }
        .item-btn:hover{
            transform:scale(1.02);
        }
        .item-btn.selected{
            background:#fde68a;
        }
        .item-btn.correct{
            background:#22c55e;
            color:#ffffff;
            box-shadow:none;
            cursor:default;
        }
        .item-btn.wrong{
            background:#fecaca;
        }
        .info-bar{
            margin-top:6px;
            font-size:13px;
            color:#4b5563;
        }
        @media (max-width:860px){
            .container{
                flex-direction:column;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="left">
        <h1>–ñ“±–ø—Ç—ã —Ç–∞–ø ‚Äì Match Up (–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä)</h1>

        <label>–ü–∞–π–¥–∞–ª–∞–Ω—ã–ª–∞—Ç—ã–Ω –∂“±–ø—Ç–∞—Ä (”ô—Ä –∂–æ–ª“ì–∞ –±—ñ—Ä –∂“±–ø):</label>
        <textarea id="pairsInput">—Å–∫—Ä–∏–ø—Ç - –±“±–π—Ä—ã“õ—Ç–∞—Ä —Ç—ñ–∑–±–µ–≥—ñ
—Å–ø—Ä–∞–π—Ç - —ç–∫—Ä–∞–Ω–¥–∞“ì—ã –∫–µ–π—ñ–ø–∫–µ—Ä
–∂–æ–±–∞ - –¥–∞–π—ã–Ω–¥–∞–ª–∞—Ç—ã–Ω –æ–π—ã–Ω –Ω–µ –±–∞“ì–¥–∞—Ä–ª–∞–º–∞
–∫”©—Ä—ñ–Ω—ñ—Å - —Å–∞—Ö–Ω–∞–¥–∞“ì—ã —Ñ–æ–Ω –Ω–µ–º–µ—Å–µ –æ—Ä—Ç–∞
–∞–ª–≥–æ—Ä–∏—Ç–º - “õ–∞–¥–∞–º–¥–∞—Ä —Ç—ñ–∑–±–µ–≥—ñ
–º–æ–Ω–∏—Ç–æ—Ä - –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã –∫”©—Ä—Å–µ—Ç–µ—Ç—ñ–Ω “õ“±—Ä—ã–ª“ì—ã</textarea>

        <div style="font-size:12px; color:#6b7280; margin-bottom:4px;">
            –ü—ñ—à—ñ–º –º—ã—Å–∞–ª—ã: <b>—Å”©–∑ - –∞–Ω—ã“õ—Ç–∞–º–∞</b> –Ω–µ–º–µ—Å–µ <b>—Ç–µ—Ä–º–∏–Ω ‚Äî —Ç“Ø—Å—ñ–Ω—ñ–∫—Ç–µ–º–µ</b>.  
            “ö–∞–∑–∞“õ—à–∞ ”ô—Ä—ñ–ø—Ç–µ—Ä–≥–µ —Ç–æ–ª—ã“õ “õ–æ–ª–¥–∞—É: ”ô, ”©, “Ø, “±, “õ, “ì, “£, —ñ.
        </div>

        <button id="buildBtn">–û–π—ã–Ω–¥—ã –¥–∞–π—ã–Ω–¥–∞—É</button>
        <button class="secondary" id="clearBtn">–¢–∞“£–¥–∞—É–¥—ã —Ç–∞–∑–∞–ª–∞—É</button>

        <div class="status" id="status"></div>

        <div class="info-bar" id="infoBar"></div>
    </div>

    <div class="right">
        <div class="game-area">
            <div class="col">
                <div class="col-title">–°”©–∑–¥–µ—Ä</div>
                <div class="items" id="leftCol"></div>
            </div>
            <div class="col">
                <div class="col-title">–ñ–∞—É–∞–ø—Ç–∞—Ä</div>
                <div class="items" id="rightCol"></div>
            </div>
        </div>
    </div>
</div>

<script>
/* -------- –ö”©–º–µ–∫—à—ñ —Ñ—É–Ω–∫—Ü–∏—è–ª–∞—Ä -------- */
function shuffle(array){
    for(let i=array.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [array[i],array[j]] = [array[j],array[i]];
    }
    return array;
}

const statusEl = document.getElementById("status");
const infoBarEl = document.getElementById("infoBar");
const leftColEl = document.getElementById("leftCol");
const rightColEl = document.getElementById("rightCol");

let pairs = [];       // [{id, left, right, matched:false}, ...]
let leftButtons = {}; // id -> button
let rightButtons = {};
let selectedLeft = null;
let selectedRight = null;
let matchedCount = 0;

function setStatus(msg, type=""){
    statusEl.textContent = msg || "";
    statusEl.className = "status " + type;
}
function setInfo(msg){
    infoBarEl.textContent = msg || "";
}

/* -------- –ü–∞—Ä—Å–∏–Ω–≥ textarea -------- */
function parsePairs(){
    const text = document.getElementById("pairsInput").value;
    const lines = text.split(/\r?\n/);
    const result = [];

    lines.forEach(line => {
        const trimmed = line.trim();
        if(!trimmed) return;
        // –¥–µ–ª–∏–º –ø–æ - –∏–ª–∏ ‚Äî
        const parts = trimmed.split(/[-‚Äì‚Äî]/);
        if(parts.length < 2) return;
        const left = parts[0].trim();
        const right = parts.slice(1).join("-").trim();
        if(left && right){
            result.push({left, right});
        }
    });
    return result;
}

/* -------- –û–π—ã–Ω–¥—ã “õ“±—Ä—É -------- */
function buildGame(){
    setStatus("");
    setInfo("");

    const rawPairs = parsePairs();
    if(rawPairs.length === 0){
        setStatus("–ö–µ–º—ñ–Ω–¥–µ –±—ñ—Ä –∂“±–ø –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑.", "err");
        return;
    }

    pairs = rawPairs.map((p, idx)=>({
        id: idx,
        left: p.left.toUpperCase(),
        right: p.right, // –∞–Ω—ã“õ—Ç–∞–º–∞–Ω—ã “Ø–ª–∫–µ–Ω ”ô—Ä—ñ–ø “õ—ã–ª–º–∞–π–º—ã–∑
        matched:false
    }));

    // —Å–æ–ª –∂”ô–Ω–µ –æ“£ –±–∞“ì–∞–Ω–¥–∞—Ä–¥—ã –±”©–ª–µ–∫ –∞—Ä–∞–ª–∞—Å—Ç—ã—Ä–∞–º—ã–∑
    const leftItems = shuffle(pairs.map(p => p.id));
    const rightItems = shuffle(pairs.map(p => p.id));

    leftColEl.innerHTML = "";
    rightColEl.innerHTML = "";
    leftButtons = {};
    rightButtons = {};
    selectedLeft = null;
    selectedRight = null;
    matchedCount = 0;

    leftItems.forEach(id=>{
        const pair = pairs.find(p=>p.id===id);
        const btn = document.createElement("button");
        btn.className = "item-btn";
        btn.textContent = pair.left;
        btn.dataset.id = id;
        btn.addEventListener("click", ()=>onLeftClick(id));
        leftColEl.appendChild(btn);
        leftButtons[id] = btn;
    });

    rightItems.forEach(id=>{
        const pair = pairs.find(p=>p.id===id);
        const btn = document.createElement("button");
        btn.className = "item-btn";
        btn.textContent = pair.right;
        btn.dataset.id = id;
        btn.addEventListener("click", ()=>onRightClick(id));
        rightColEl.appendChild(btn);
        rightButtons[id] = btn;
    });

    setInfo("–ñ“±–ø—Ç–∞—Ä —Å–∞–Ω—ã: " + pairs.length + ". –¢–∞–±—ã–ª“ì–∞–Ω—ã: 0.");
    setStatus("–°–æ–ª –∂–∞“õ—Ç–∞–Ω —Å”©–∑–¥—ñ, –æ“£ –∂–∞“õ—Ç–∞–Ω —Å”ô–π–∫–µ—Å –∞–Ω—ã“õ—Ç–∞–º–∞–Ω—ã —Ç–∞“£–¥–∞“£—ã–∑.", "ok");
}

/* -------- –¢–∞“£–¥–∞—É–¥—ã —Ç–∞–∑–∞–ª–∞—É -------- */
function clearSelection(){
    selectedLeft = null;
    selectedRight = null;
    Object.values(leftButtons).forEach(b => b.classList.remove("selected","wrong"));
    Object.values(rightButtons).forEach(b => b.classList.remove("selected","wrong"));
}

/* -------- –°–æ–ª/–æ“£ –±–∞“ì–∞–Ω –±–∞—Ç—ã—Ä–º–∞–ª–∞—Ä—ã -------- */
function onLeftClick(id){
    const pair = pairs.find(p=>p.id===id);
    if(!pair || pair.matched) return;

    if(selectedLeft === id){
        // “õ–∞–π—Ç–∞ –±–∞—Å—Å–∞ ‚Äì –∞–ª—ã–ø —Ç–∞—Å—Ç–∞–π–º—ã–∑
        selectedLeft = null;
        leftButtons[id].classList.remove("selected");
        return;
    }

    // –∂–∞“£–∞ —Ç–∞“£–¥–∞—É
    Object.values(leftButtons).forEach(b => b.classList.remove("selected","wrong"));
    leftButtons[id].classList.add("selected");
    selectedLeft = id;

    if(selectedRight !== null){
        checkMatch();
    }
}

function onRightClick(id){
    const pair = pairs.find(p=>p.id===id);
    if(!pair || pair.matched) return;

    if(selectedRight === id){
        selectedRight = null;
        rightButtons[id].classList.remove("selected");
        return;
    }

    Object.values(rightButtons).forEach(b => b.classList.remove("selected","wrong"));
    rightButtons[id].classList.add("selected");
    selectedRight = id;

    if(selectedLeft !== null){
        checkMatch();
    }
}

/* -------- –ñ“±–ø—Ç—ã —Ç–µ–∫—Å–µ—Ä—É -------- */
function checkMatch(){
    if(selectedLeft === null || selectedRight === null) return;

    const leftId = selectedLeft;
    const rightId = selectedRight;

    if(leftId === rightId){
        // –¥“±—Ä—ã—Å –∂“±–ø
        pairs.find(p=>p.id===leftId).matched = true;
        const lb = leftButtons[leftId];
        const rb = rightButtons[rightId];
        lb.classList.remove("selected");
        rb.classList.remove("selected");
        lb.classList.add("correct");
        rb.classList.add("correct");
        lb.disabled = true;
        rb.disabled = true;

        matchedCount++;
        setStatus("–î“±—Ä—ã—Å! –ñ“±–ø —Ç–∞–±—ã–ª–¥—ã ‚úÖ", "ok");
        setInfo("–ñ“±–ø—Ç–∞—Ä —Å–∞–Ω—ã: " + pairs.length + ". –¢–∞–±—ã–ª“ì–∞–Ω—ã: " + matchedCount + ".");

        selectedLeft = null;
        selectedRight = null;

        if(matchedCount === pairs.length){
            setStatus("“ö“±—Ç—Ç—ã“õ—Ç–∞–π–º—ã–Ω! –ë–∞—Ä–ª—ã“õ –∂“±–ø —Ç–∞–±—ã–ª–¥—ã üéâ", "ok");
        }
    }else{
        // “õ–∞—Ç–µ –∂“±–ø
        const lb = leftButtons[leftId];
        const rb = rightButtons[rightId];
        lb.classList.add("wrong");
        rb.classList.add("wrong");
        setStatus("”ò–ª—ñ –µ–º–µ—Å. “ö–∞–π—Ç–∞ –∫”©—Ä—ñ“£—ñ–∑ ‚ùå", "err");

        // –∞–∑ —É–∞“õ—ã—Ç—Ç–∞–Ω –∫–µ–π—ñ–Ω —Ç–∞–∑–∞–ª–∞—É
        setTimeout(()=>{
            if(lb) lb.classList.remove("selected","wrong");
            if(rb) rb.classList.remove("selected","wrong");
            selectedLeft = null;
            selectedRight = null;
        }, 550);
    }
}

/* -------- –ë–∞—Ç—ã—Ä–º–∞–ª–∞—Ä -------- */
document.getElementById("buildBtn").addEventListener("click", buildGame);
document.getElementById("clearBtn").addEventListener("click", clearSelection);

/* –ë–µ—Ç—Ç—ñ –∞—à“õ–∞–Ω–¥–∞ –∞–≤—Ç–æ–º–∞—Ç—Ç—ã —Ç“Ø—Ä–¥–µ –±—ñ—Ä –æ–π—ã–Ω –∂–∞—Å–∞–π–º—ã–∑ */
buildGame();
</script>
</body>
</html>
