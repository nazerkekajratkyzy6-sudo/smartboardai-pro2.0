<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>Тоғызқұмалақ – онлайн симмуляция</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #fdf6e4;
        margin: 0; padding: 0;
        display: flex; flex-direction: column;
        align-items: center;
    }
    h1 { margin-top: 20px; }

    .board {
        margin-top: 20px;
        display: grid;
        grid-template-columns: repeat(9, 80px);
        grid-template-rows: repeat(2, 80px);
        gap: 10px;
    }

    .cell {
        background: #fff3d1;
        border-radius: 12px;
        display: flex; justify-content: center; align-items: center;
        font-size: 20px; font-weight: bold;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .cell:hover { background: #ffe9a3; }

    .label-row {
        display: grid;
        grid-template-columns: repeat(9, 80px);
        text-align: center;
        margin-top: 5px;
        font-weight: bold;
    }

    .info {
        margin-top: 20px;
        font-size: 22px;
    }

    .kazans {
        margin-top: 20px;
        display: flex;
        gap: 100px;
        font-size: 22px;
    }

    .kazans div {
        background: #fff3d1;
        padding: 15px 25px;
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 18px;
        cursor: pointer;
        background: #ffcc66;
        border: none;
        border-radius: 10px;
    }
    button:hover { background:#ffdb99; }
</style>
</head>
<body>

<h1>Тоғызқұмалақ – екі ойыншы</h1>

<div class="info" id="turn">Кезек: Ойыншы 1</div>

<div class="kazans">
    <div>Ойыншы 1 қазаны: <span id="kaz1">0</span></div>
    <div>Ойыншы 2 қазаны: <span id="kaz2">0</span></div>
</div>

<div class="label-row">
    <div>9</div><div>8</div><div>7</div><div>6</div><div>5</div><div>4</div><div>3</div><div>2</div><div>1</div>
</div>

<div class="board" id="board"></div>

<div class="label-row">
    <div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div>
</div>

<button onclick="resetGame()">Жаңадан бастау</button>

<script>
/* -------------------------------------
   ТОҒЫЗҚҰМАЛАҚ ЛОГИКАСЫ
------------------------------------- */

// Ойын тақтасы:
// Жоғарғы қатар – ойыншы 2 (отоу 9→1)
// Төменгі қатар – ойыншы 1 (отоу 1→9)

let pitsTop =  [9,9,9,9,9,9,9,9,9];   // Player 2
let pitsBot =  [9,9,9,9,9,9,9,9,9];   // Player 1

let kazan1 = 0; // Ойыншы 1
let kazan2 = 0; // Ойыншы 2

let turn = 1;   // 1 немесе 2

let tuzdyq1 = -1;
let tuzdyq2 = -1;

function renderBoard() {
    const board = document.getElementById("board");
    board.innerHTML = "";

    // upper row (player 2)
    for (let i=0; i<9; i++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.textContent = pitsTop[8-i]; // reverse
        cell.onclick = ()=>makeMove("top", 8-i);
        board.appendChild(cell);
    }

    // lower row (player 1)
    for (let i=0; i<9; i++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.textContent = pitsBot[i];
        cell.onclick = ()=>makeMove("bot", i);
        board.appendChild(cell);
    }
}

function makeMove(side, index) {
    // дұрыс ойыншы таңдасын
    if (turn === 1 && side !== "bot") return;
    if (turn === 2 && side !== "top") return;

    let pits = (side === "bot") ? pitsBot : pitsTop;
    let stones = pits[index];

    if (stones === 0) return; // бос жүріс болмайды

    pits[index] = 0;

    let posSide = side;
    let posIdx = index;

    while (stones > 0) {
        // келесі ұя
        if (posSide === "bot") {
            posIdx++;
            if (posIdx === 9) {
                posSide = "top";
                posIdx = 8;
            }
        } else {
            posIdx--;
            if (posIdx === -1) {
                posSide = "bot";
                posIdx = 0;
            }
        }
        // тас салу
        if (posSide === "bot") pitsBot[posIdx]++;
        else pitsTop[posIdx]++;

        stones--;
    }

    // Соңғы түскен тасқа қарай "жұмалау" (жұп болса → қазанға)
    let lastSide = posSide;
    let lastIdx = posIdx;

    let targetPits = (lastSide === "bot") ? pitsBot : pitsTop;
    let stonesLast = targetPits[lastIdx];

    // қарсы адамның жағына түскенде
    let isOpponent = (turn === 1 && lastSide==="top") || (turn === 2 && lastSide==="bot");

    if (isOpponent && stonesLast % 2 === 0) {
        // жұп болса – қазанға кетеді
        if (turn === 1) kazan1 += stonesLast;
        else kazan2 += stonesLast;
        targetPits[lastIdx] = 0;
    }

    // ход ауыстыру
    turn = (turn === 1) ? 2 : 1;
    document.getElementById("turn").textContent = "Кезек: Ойыншы " + turn;

    checkWin();
    renderBoard();
    renderKazans();
}

function renderKazans() {
    document.getElementById("kaz1").textContent = kazan1;
    document.getElementById("kaz2").textContent = kazan2;
}

function checkWin() {
    // 82 тас жинаса – жеңді
    if (kazan1 >= 82) alert("Ойыншы 1 жеңді!");
    if (kazan2 >= 82) alert("Ойыншы 2 жеңді!");
}

function resetGame() {
    pitsTop =  [9,9,9,9,9,9,9,9,9];
    pitsBot =  [9,9,9,9,9,9,9,9,9];
    kazan1 = 0; kazan2 = 0;
    turn = 1;
    tuzdyq1 = -1; tuzdyq2 = -1;
    renderBoard(); renderKazans();
}

renderBoard();
renderKazans();
</script>

</body>
</html>
