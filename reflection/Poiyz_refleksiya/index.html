<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ü–æ–π—ã–∑ —Ä–µ—Ñ–ª–µ–∫—Å–∏—è—Å—ã ‚Ä¢ –ê–≤—Ç–æ—Ä: Nazerke Kairatkyzy</title>

<style>
  :root{
    --ok:#22c55e;
    --ask:#facc15;
    --no:#ef4444;
    --glass:#ffffffcc;
    --bg1:#dbeafe;
    --bg2:#fef9c3;
    --ink:#1f2937;
  }

  body{
    margin:0;
    padding:20px;
    font-family:"Inter", Arial, sans-serif;
    background:linear-gradient(135deg, var(--bg1), var(--bg2));
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:20px;
    color:var(--ink);
  }

  h1{
    font-size:32px;
    font-weight:800;
    margin:8px 0 0;
    color:#0f172a;
  }

  .sub{
    opacity:.8;
    font-size:14px;
  }

  .glass{
    background:var(--glass);
    border-radius:20px;
    padding:20px;
    border:1px solid #e5e7eb;
    box-shadow:0 10px 30px rgba(0,0,0,0.08);
    backdrop-filter:blur(8px);
  }

  .train-box{
    width:min(900px,95vw);
    overflow:hidden;
  }

  .train{
    display:flex;
    gap:20px;
    transition:transform .3s ease;
    padding:20px 0;
  }

  .wagon{
    width:160px;
    min-height:120px;
    background:#fff;
    border-radius:16px;
    border:1px solid #e5e7eb;
    box-shadow:0 8px 20px rgba(0,0,0,0.07);
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    font-weight:700;
    font-size:18px;
    cursor:pointer;
    transition:.3s;
  }

  .wagon:hover{
    transform:translateY(-4px);
    box-shadow:0 10px 25px rgba(0,0,0,0.12);
  }

  .ok{background:#dcfce7}
  .ask{background:#fef9c3}
  .no{background:#fee2e2}

  .num{
    font-size:40px;
    font-weight:900;
    margin:5px 0;
  }

  .hud{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    justify-content:center;
  }

  .pill{
    background:#fff;
    padding:8px 14px;
    border-radius:999px;
    border:1px solid #e5e7eb;
    font-size:14px;
  }

  .actions{
    display:flex;
    gap:10px;
    justify-content:center;
    flex-wrap:wrap;
    margin-top:10px;
  }

  button{
    cursor:pointer;
    background:#0f172a;
    color:#fff;
    border:0;
    padding:10px 18px;
    border-radius:12px;
    font-weight:700;
    transition:.2s;
  }

  button.ghost{
    background:#fff;
    color:#111;
    border:1px solid #e5e7eb;
  }

  button:hover{
    transform:translateY(-2px);
    box-shadow:0 3px 12px rgba(0,0,0,0.15);
  }

  .author{
    margin-top:20px;
    font-size:14px;
    opacity:.7;
  }

</style>
</head>

<body>

<h1>üöÜ –ü–æ–π—ã–∑ —Ä–µ—Ñ–ª–µ–∫—Å–∏—è—Å—ã</h1>
<p class="sub">–û“õ—É—à—ã–ª–∞—Ä “õ–∞–π –≤–∞–≥–æ–Ω“ì–∞ –æ—Ç—ã—Ä–∞–¥—ã? ‚¨á</p>

<div class="hud">
  <div class="pill">–ë–∞—Ä–ª—ã“ì—ã: <b id="total">0</b></div>
  <div class="pill">–¢“Ø—Å—ñ–Ω–¥—ñ–º: <b id="okCount">0</b></div>
  <div class="pill">–°“±—Ä–∞“ì—ã–º –±–∞—Ä: <b id="askCount">0</b></div>
  <div class="pill">–¢“Ø—Å—ñ–Ω–±–µ–¥—ñ–º: <b id="noCount">0</b></div>
</div>

<div class="glass train-box">
  <div class="train" id="train">
    <div class="wagon ok" data-type="ok">
      <div>–¢“Ø—Å—ñ–Ω–¥—ñ–º</div>
      <div class="num" id="okNum">0</div>
    </div>

    <div class="wagon ask" data-type="ask">
      <div>–°“±—Ä–∞“ì—ã–º –±–∞—Ä</div>
      <div class="num" id="askNum">0</div>
    </div>

    <div class="wagon no" data-type="no">
      <div>–¢“Ø—Å—ñ–Ω–±–µ–¥—ñ–º</div>
      <div class="num" id="noNum">0</div>
    </div>
  </div>
</div>

<div class="actions">
  <button class="ghost" id="undoBtn">Undo</button>
  <button class="ghost" id="resetBtn">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
  <button id="exportBtn">CSV –∂“Ø–∫—Ç–µ—É</button>
</div>

<p class="author">–ê–≤—Ç–æ—Ä: <b>Nazerke Kairatkyzy</b></p>

<script>
(function(){
  const els = {
    total: document.getElementById("total"),
    okCount: document.getElementById("okCount"),
    askCount: document.getElementById("askCount"),
    noCount: document.getElementById("noCount"),
    okNum: document.getElementById("okNum"),
    askNum: document.getElementById("askNum"),
    noNum: document.getElementById("noNum"),
  };

  const STORAGE_KEY="trainReflection2025";
  const LOG_KEY="trainReflectionLog2025";

  let state = load() || {ok:0, ask:0, no:0};
  let log = loadLog() || [];

  function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }
  function load(){ try{return JSON.parse(localStorage.getItem(STORAGE_KEY));}catch(e){return null;} }
  function saveLog(){ localStorage.setItem(LOG_KEY, JSON.stringify(log)); }
  function loadLog(){ try{return JSON.parse(localStorage.getItem(LOG_KEY));}catch(e){return null;} }

  function update(){
    const total = state.ok + state.ask + state.no;
    els.total.textContent = total;
    els.okCount.textContent = state.ok;
    els.askCount.textContent = state.ask;
    els.noCount.textContent = state.no;
    els.okNum.textContent = state.ok;
    els.askNum.textContent = state.ask;
    els.noNum.textContent = state.no;

    // –ü–æ–π—ã–∑ –≤–∞–≥–æ–Ω–¥–∞—Ä—ã “õ–æ–∑“ì–∞–ª—ã—Å —ç—Ñ—Ñ–µ–∫—Ç—ñ
    const shift = (state.no * 20) - (state.ok * 10);
    document.getElementById("train").style.transform = `translateX(${shift}px)`;
  }

  function add(type){
    state[type]++;
    log.push({type, ts:Date.now()});
    save(); saveLog(); update();
  }

  function undo(){
    if(!log.length) return;
    const last = log.pop();
    if(state[last.type]>0) state[last.type]--;
    save(); saveLog(); update();
  }

  function resetAll(){
    if(!confirm("–ë–∞—Ä–ª—ã“ì—ã–Ω –Ω”©–ª–≥–µ —Ç“Ø—Å—ñ—Ä–µ–º—ñ–∑ –±–µ?")) return;
    state={ok:0,ask:0,no:0};
    log=[];
    save(); saveLog(); update();
  }

  function exportCSV(){
    const rows=[["timestamp","type"]];
    log.forEach(i=>rows.push([new Date(i.ts).toISOString(), i.type]));
    const csv = rows.map(r=>r.join(",")).join("\n");
    const blob = new Blob([csv],{type:"text/csv"});
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;a.download="poyyz_reflection_nazerke.csv";
    document.body.appendChild(a);a.click();
    a.remove();URL.revokeObjectURL(url);
  }

  document.querySelectorAll(".wagon").forEach(w=>{
    w.addEventListener("click", ()=> add(w.dataset.type));
  });

  undoBtn.onclick=undo;
  resetBtn.onclick=resetAll;
  exportBtn.onclick=exportCSV;

  update();
})();
</script>

</body>
</html>
